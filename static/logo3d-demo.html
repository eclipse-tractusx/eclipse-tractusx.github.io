<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Logo Effect - POC Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0f1419;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            padding: 40px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.5rem;
        }

        .subtitle {
            text-align: center;
            color: #999;
            margin-bottom: 60px;
            font-size: 1.1rem;
        }

        .gallery {
            display: flex;
            flex-wrap: wrap;
            gap: 80px;
            justify-content: center;
            align-items: center;
            margin-bottom: 100px;
        }

        .logo-item {
            text-align: center;
        }

        .logo-name {
            margin-top: 20px;
            font-weight: bold;
            font-size: 1rem;
        }

        .logo-gradient {
            margin-top: 5px;
            font-size: 0.75rem;
            color: #666;
        }

        /* 3D Logo Stack Container */
        .logo3d-container {
            position: relative;
            width: 300px;
            height: 320px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            transform-style: preserve-3d;
        }

        /* Individual Layer */
        .logo3d-layer {
            position: absolute;
            width: 180px;
            height: 180px;
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;

            transition: all 0.3s ease;
            transform-style: preserve-3d;
            left: 50%;
            top: 50%;
            margin-left: -90px;
            margin-top: -90px;
        }

        .logo3d-layer svg {
            width: 50%;
            height: 50%;
        }

        /* Layer 5 - Bottom border only */
        .logo3d-layer-5 {
            transform: rotateX(55deg) rotateZ(45deg) translateZ(-14.5px);
            z-index: 0;
            background: transparent;
            border: 2px solid;
            opacity: 0.4;
        }

        /* Layer 4 - Bottom (darkest) */
        .logo3d-layer-4 {
            transform: rotateX(55deg) rotateZ(45deg) translateZ(0px);
            z-index: 1;
            opacity: 0.4;
        }

        /* Border Layer 4b */
        .logo3d-layer-4b {
            transform: rotateX(55deg) rotateZ(45deg) translateZ(14.5px);
            z-index: 2;
            background: transparent;
            border: 2px solid;
            opacity: 0.4;
        }

        /* Layer 3 */
        .logo3d-layer-3 {
            transform: rotateX(55deg) rotateZ(45deg) translateZ(29px);
            z-index: 3;
            opacity: 0.6;
        }

        /* Border Layer 3b */
        .logo3d-layer-3b {
            transform: rotateX(55deg) rotateZ(45deg) translateZ(43.5px);
            z-index: 4;
            background: transparent;
            border: 2px solid;
            opacity: 0.6;
        }

        /* Layer 2 */
        .logo3d-layer-2 {
            transform: rotateX(55deg) rotateZ(45deg) translateZ(58px);
            z-index: 5;
            opacity: 0.8;
        }

        /* Border Layer 2b */
        .logo3d-layer-2b {
            transform: rotateX(55deg) rotateZ(45deg) translateZ(72.5px);
            z-index: 6;
            background: transparent;
            border: 2px solid;
            opacity: 0.8;
        }

        /* Layer 1 - Top (brightest) */
        .logo3d-layer-1 {
            transform: rotateX(55deg) rotateZ(45deg) translateZ(87px);
            z-index: 7;
        }

        .notes {
            max-width: 900px;
            margin: 80px auto 0;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .notes h2 {
            margin-bottom: 20px;
        }

        .notes ul {
            line-height: 1.8;
            color: #ccc;
            margin-left: 20px;
        }

        .notes li {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¨ 3D Isometric Logo Effect - POC</h1>
        <p class="subtitle">4-layer stacked effect with dynamic gradient colors from kitsData.js</p>

        <div class="gallery" id="kits-gallery">
            <!-- Dynamically generated from kitsData.js -->
        </div>

        <div class="notes">
            <h2>âœ¨ Implementation Details</h2>
            <ul>
                <li><strong>4 Layers:</strong> Each logo is rendered 4 times with progressive opacity (100%, 80%, 60%, 40%)</li>
                <li><strong>Border Layers:</strong> 4 additional border-only layers between content layers with matching opacity</li>
                <li><strong>3D Rotation:</strong> X: 55Â°, Z: 45Â° for front-facing isometric view</li>
                <li><strong>Depth Separation:</strong> Layers spaced 25px apart in Z-axis for clear visibility</li>
                <li><strong>Logo Size:</strong> 45% of layer dimensions for better visual balance</li>
                <li><strong>Dynamic Colors:</strong> Extracts gradient from kitsData.js and generates darker variants mathematically</li>
                <li><strong>Pure CSS:</strong> 3D transforms with perspective for realistic depth</li>
                <li><strong>Reusable:</strong> Can be applied to any kit logo with any gradient</li>
            </ul>
            
            <h2 style="margin-top: 30px;">ðŸ“‹ CSS Structure</h2>
            <ul>
                <li><strong>Layer Rotation:</strong> rotateX(55Â°) rotateZ(45Â°) - Front-facing stack view</li>
                <li><strong>Logo Rotation:</strong> rotateX(-110Â°) rotateZ(90Â°) - Counter-rotated for flat appearance</li>
                <li>Layer 1 (Top): translateZ(75px) - 100% opacity</li>
                <li>Layer 2: translateZ(50px) - 80% opacity</li>
                <li>Layer 3: translateZ(25px) - 60% opacity</li>
                <li>Layer 4 (Bottom): translateZ(0px) - 40% opacity</li>
                <li><strong>Logo Size:</strong> 45% of layer size for better proportion</li>
                <li><strong>Perspective:</strong> 1200px for realistic depth</li>
            </ul>
        </div>
    </div>

    <script>
        // Color utilities
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function darkenColor(hex, factor) {
            const rgb = hexToRgb(hex);
            return `rgb(${Math.round(rgb.r * factor)}, ${Math.round(rgb.g * factor)}, ${Math.round(rgb.b * factor)})`;
        }

        function createLayerGradient(color1, color2, factor) {
            return `linear-gradient(45deg, ${darkenColor(color1, factor)} 0%, ${darkenColor(color2, factor)} 100%)`;
        }

        // Extract gradient colors from CSS gradient string
        function extractGradientColors(gradientString) {
            const matches = gradientString.match(/#[0-9A-Fa-f]{6}/g);
            if (matches && matches.length >= 2) {
                return { color1: matches[0], color2: matches[1] };
            }
            return null;
        }

        // Create 3D logo layers with dynamic logo size
        function create3DLogo(containerId, logoSvg, color1, color2, logoSize = 45) {
            const container = document.getElementById(containerId);
            
            // Generate gradient variations (100%, 75%, 55%, 40%)
            const gradients = [
                `linear-gradient(45deg, ${color1} 0%, ${color2} 100%)`,
                createLayerGradient(color1, color2, 0.75),
                createLayerGradient(color1, color2, 0.55),
                createLayerGradient(color1, color2, 0.40)
            ];

            // Create 4 content layers with border layers in between
            // Layer 5 (bottom border only)
            const layer5 = document.createElement('div');
            layer5.className = 'logo3d-layer logo3d-layer-5';
            layer5.style.borderColor = color1;
            container.appendChild(layer5);

            // Layer 4 (bottom)
            const layer4 = document.createElement('div');
            layer4.className = 'logo3d-layer logo3d-layer-4';
            layer4.style.background = gradients[3];
            container.appendChild(layer4);

            // Border layer 4b
            const layer4b = document.createElement('div');
            layer4b.className = 'logo3d-layer logo3d-layer-4b';
            layer4b.style.borderColor = color1;
            container.appendChild(layer4b);

            // Layer 3
            const layer3 = document.createElement('div');
            layer3.className = 'logo3d-layer logo3d-layer-3';
            layer3.style.background = gradients[2];
            container.appendChild(layer3);

            // Border layer 3b
            const layer3b = document.createElement('div');
            layer3b.className = 'logo3d-layer logo3d-layer-3b';
            layer3b.style.borderColor = color1;
            container.appendChild(layer3b);

            // Layer 2
            const layer2 = document.createElement('div');
            layer2.className = 'logo3d-layer logo3d-layer-2';
            layer2.style.background = gradients[1];
            container.appendChild(layer2);

            // Border layer 2b
            const layer2b = document.createElement('div');
            layer2b.className = 'logo3d-layer logo3d-layer-2b';
            layer2b.style.borderColor = color1;
            container.appendChild(layer2b);

            // Layer 1 (top) with logo
            const layer1 = document.createElement('div');
            layer1.className = 'logo3d-layer logo3d-layer-1';
            layer1.style.background = gradients[0];
            layer1.innerHTML = logoSvg;
            
            // Apply dynamic logo size
            const svgElement = layer1.querySelector('svg');
            if (svgElement) {
                svgElement.style.width = `${logoSize}%`;
                svgElement.style.height = `${logoSize}%`;
            }
            
            container.appendChild(layer1);
        }

        // Logo SVG paths mapping (from kitsData.js structure)
        const logoSvgPaths = {
            'connector': '/img/kits/connector/connector-kit-raw-logo.svg',
            'data-governance': '/img/kits/data-governance/data-governance-kit-raw-logo.svg',
            'data-trust-security': '/img/kits/data-trust-and-security/data-trust-and-security-kit-raw-logo.svg',
            'business-partner': '/img/kits/business-partner/business-partner-raw-logo.svg',
            'digital-twin': '/img/kits/digital-twin/digital-twin-kit-raw-logo.svg',
            'industry-core': '/img/kits/industry-core/industry-core-kit-raw-logo.svg',
            'data-chain': '/img/kits/data-chain/data-chain-kit-raw-logo.svg',
            'traceability': '/img/kits/traceability/traceability-kit-raw-logo.svg',
            'ess': '/img/kits/ess/ess-kit-raw-logo.svg',
            'pcf': '/img/kits/pcf/pcf-kit-raw-logo.svg',
            'eco-pass': '/img/kits/eco-pass/eco-pass-kit-raw-logo.svg',
            'dcm': '/img/kits/demand-and-capacity-management/demand-and-capacity-management-kit-raw-logo.svg',
            'puris': '/img/kits/puris/puris-kit-raw-logo.svg',
            'logistics': '/img/kits/logistics/logistics-kit-raw-logo.svg',
            'maas': '/img/kits/manufacturing-as-a-service/manufacturing-as-a-service-kit-raw-logo.svg',
            'model-based-production': '/img/kits/model-based-production/model-based-production-kit-raw-logo.svg',
            'osim': '/img/kits/osim/osim-kit-raw-logo.svg',
            'behavior-twin': '/img/kits/behavior-twin/behavior-twin-kit-raw-logo.svg',
            'data-driven-quality': '/img/kits/data-driven-quality-management/data-driven-quality-management-kit-raw-logo.svg',
            'agents': '/img/kits/agents/agents-kit-raw-logo.svg',
            'circularity': '/img/kits/circularity/circularity-kit-raw-logo.svg',
            'customs': '/img/kits/customs/customs-kit-logo.svg',
            'requirements': '/img/kits/requirements/requirements-kit-raw-logo.svg',
            'geometry': '/img/kits/geometry/geometry-kit-logo.svg'
        };

        // KitsData from the actual kitsData.js structure
        const kitsData = {
            dataspaceFoundation: [
                { id: 'connector', name: 'CONNECTOR KIT', colors: { primary: '#2316E3', gradient: 'linear-gradient(45deg, #3372CC 0%, #2316E3 100%)' }, logoHeight: 80, logoWidth: 80 },
                { id: 'business-partner', name: 'BUSINESS PARTNER KIT', colors: { primary: '#1E13C2', gradient: 'linear-gradient(45deg, #3372CC 0%, #1E13C2 100%)' }, logoHeight: 100, logoWidth: 100 }
            ],
            industryCoreFoundation: [
                { id: 'digital-twin', name: 'DIGITAL TWIN KIT', colors: { primary: '#EA3650', gradient: 'linear-gradient(45deg, #F08B9B 0%, #EA3650 100%)' }, logoHeight: 80, logoWidth: 80 },
                { id: 'industry-core', name: 'INDUSTRY CORE KIT', colors: { primary: '#EC4A61', gradient: 'linear-gradient(45deg, #F08B9B 0%, #EC4A61 100%)' }, logoHeight: 120, logoWidth: 120 },
                { id: 'data-chain', name: 'DATA CHAIN KIT', colors: { primary: '#EB4877', gradient: 'linear-gradient(45deg, #F08B9B 0%, #EB4877 100%)' }, logoHeight: 90, logoWidth: 90 },
                { id: 'traceability', name: 'TRACEABILITY KIT', colors: { primary: '#F45D3C', gradient: 'linear-gradient(45deg, #FFBD59 0%, #F45D3C 100%)' }, logoHeight: 100, logoWidth: 100 }
            ],
            useCases: [
                { id: 'ess', name: 'ESS KIT', colors: { primary: '#2B9943', gradient: 'linear-gradient(45deg, #66C791 0%, #2B9943 100%)' }, logoHeight: 90, logoWidth: 90 },
                { id: 'pcf', name: 'PRODUCT CARBON FOOTPRINT KIT', colors: { primary: '#368C7D', gradient: 'linear-gradient(45deg, #66C791 0%, #368C7D 100%)' }, logoHeight: 120, logoWidth: 120 },
                { id: 'eco-pass', name: 'ECO PASS KIT', colors: { primary: '#267063', gradient: 'linear-gradient(45deg, #66C791 0%, #267063 100%)' }, logoHeight: 100, logoWidth: 100 },
                { id: 'dcm', name: 'DEMAND & CAPACITY MANAGEMENT KIT', colors: { primary: '#B95EFF', gradient: 'linear-gradient(45deg, #E5CCFF 0%, #B95EFF 100%)' }, logoHeight: 80, logoWidth: 80 },
                { id: 'puris', name: 'PURIS KIT', colors: { primary: '#A159FF', gradient: 'linear-gradient(45deg, #E5CCFF 0%, #A159FF 100%)' }, logoHeight: 80, logoWidth: 80 },
                { id: 'behavior-twin', name: 'BEHAVIOUR TWIN KIT', colors: { primary: '#FFA601', gradient: 'linear-gradient(45deg, #FFC357 0%, #FFA601 100%)' }, logoHeight: 80, logoWidth: 80 },
                { id: 'data-driven-quality', name: 'DATA DRIVEN QUALITY KIT', colors: { primary: '#EE6A28', gradient: 'linear-gradient(45deg, #FFBD59 0%, #EE6A28 100%)' }, logoHeight: 120, logoWidth: 120 },
                { id: 'geometry', name: 'GEOMETRY KIT', colors: { primary: '#17FFBF', gradient: 'linear-gradient(45deg, #aebfc4 0%, #8c9ea3 100%)' }, logoHeight: 100, logoWidth: 100 }
            ]
        };

        // Cache for loaded SVGs
        const svgCache = {};

        // Function to load SVG content
        async function loadSvg(kitId) {
            if (svgCache[kitId]) {
                return svgCache[kitId];
            }

            const svgPath = logoSvgPaths[kitId];
            if (!svgPath) {
                console.warn(`No SVG path found for kit: ${kitId}`);
                return null;
            }

            try {
                const response = await fetch(svgPath);
                if (!response.ok) {
                    console.warn(`Failed to load SVG for ${kitId}: ${response.statusText}`);
                    return null;
                }
                const svgText = await response.text();
                svgCache[kitId] = svgText;
                return svgText;
            } catch (error) {
                console.warn(`Error loading SVG for ${kitId}:`, error);
                return null;
            }
        }

        // Generate gallery dynamically
        const gallery = document.getElementById('kits-gallery');
        
        // Flatten all kits into a single array
        const allKits = [
            ...kitsData.dataspaceFoundation,
            ...kitsData.industryCoreFoundation,
            ...kitsData.useCases
        ];

        // Create a logo item for each kit and load SVGs asynchronously
        async function initializeGallery() {
            for (const kit of allKits) {
                const logoItem = document.createElement('div');
                logoItem.className = 'logo-item';
                
                const container = document.createElement('div');
                container.className = 'logo3d-container';
                container.id = kit.id;
                
                const nameLabel = document.createElement('p');
                nameLabel.className = 'logo-name';
                nameLabel.textContent = kit.name;
                
                const gradientLabel = document.createElement('p');
                gradientLabel.className = 'logo-gradient';
                const colors = extractGradientColors(kit.colors.gradient);
                if (colors) {
                    gradientLabel.textContent = `${colors.color1} â†’ ${colors.color2}`;
                }
                
                logoItem.appendChild(container);
                logoItem.appendChild(nameLabel);
                logoItem.appendChild(gradientLabel);
                gallery.appendChild(logoItem);
                
                // Load SVG and create 3D logo
                const logoSvg = await loadSvg(kit.id);
                if (logoSvg) {
                    // Calculate logo size percentage based on logoWidth/logoHeight
                    const avgSize = (kit.logoWidth + kit.logoHeight) / 2;
                    const logoSizePercent = (avgSize / 80) * 45;
                    
                    // Create the 3D logo
                    const colors2 = extractGradientColors(kit.colors.gradient);
                    if (colors2) {
                        create3DLogo(kit.id, logoSvg, colors2.color1, colors2.color2, logoSizePercent);
                    }
                } else {
                    console.warn(`Could not load SVG for kit: ${kit.id}`);
                }
            }
        }

        // Initialize the gallery
        initializeGallery();
    </script>
</body>
</html>
