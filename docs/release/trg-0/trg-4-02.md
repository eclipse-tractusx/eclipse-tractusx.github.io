---
title: TRG 4.02 - Base Images
---

| Status | Created     | Post-History                                                                    |
|--------|-------------|---------------------------------------------------------------------------------|
| Draft  | 15-Jan-2024 | Add Base Image Security                                                         |
| Active | 06-Dec-2023 | Add advantages of Dockerhub images                                              |
| Draft  | 04-May-2023 | Remove notice in favor of dedicated TRG; Add mandatory base image for frontends |
| Active | 25-Nov-2022 | Initial release                                                                 |

## Why

As part of our legal due diligence, we need to provide the best information possible about our distributed (published)
Docker images. Similar to our 3rd-party dependency scans and the `DEPENDENCIES` file, Docker images also have to be
scanned and the results published. We want to help you to keep a high standard process, by defining guidelines,
described in this TRG.

## Description

As Eclipse Tractus-X project, we don't have automated processes for publishing container scan results (yet). This is why
we use information that is already gathered for us. DockerHub is running container scans for
all [official images](https://docs.docker.com/trusted-content/official-images/) and is publishing the scans result in
the [docker-library/repo-info repository](https://github.com/docker-library/repo-info).

Utilizing official images from DockerHub is advantageous due to its role as a trusted repository of curated and verified
open source containers. DockerHub provides a centralized platform where developers can access a wide range of pre-built
containers which adhere to established best practices and meet certain standards of quality, security, and reliability,
giving developers confidence in the integrity of the containers they deploy. By incorporating prepared images, teams can
foster consistency across environments, reduce the likelihood of vulnerabilities, and accelerate the overall software
delivery pipeline rather than managing complex container configurations from scratch.

We are leveraging this information by restricting the base images we use for our published container images to a minimal
set. Aligning on specific base images also gives us the opportunity to provide you with templates for the legal notice,
like described in [TRG 4.06 - Notice for docker images](./trg-4-06.md)

### Base Images to Use

The following table lists container base images, that are already agreed on.

| Language / Runtime / OS   | Container base image                                                       | Notes                                                                                                                          |
|---------------------------|----------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------|
| Java / Kotlin / JVM based | [Eclipse Temurin](https://hub.docker.com/_/eclipse-temurin)                | prefer JRE over JDK and alpine tags for your JRE version, e.g.:<br/>`21-jre`, `21-jre-alpine`, `20-jre`, `20-jre-alpine`, etc. |
| JS frontends              | [nginx-unprivileged](https://hub.docker.com/r/nginxinc/nginx-unprivileged) | prefer `1.25`, `1.25-alpine` or `alpine` tag                                                                                   |
| .NET runtime              | [.NET runtime](https://hub.docker.com/_/microsoft-dotnet-runtime)          | prefer `8.0-alpine` tag                                                                                                        |
| ASP.NET runtime           | [ASP.NET core runtime](https://hub.docker.com/_/microsoft-dotnet-aspnet)   | prefer `8.0-alpine` tag                                                                                                        |
| Linux                     | [Alpine Linux](https://hub.docker.com/_/alpine)                            | prefer `3.16`, `3.17`, `3.18` or `3.19` tag                                                                                    |

If the language or runtime environment of your product is not listed above, feel free
to [start a discussion](https://github.com/eclipse-tractusx/sig-infra/discussions) and propose your preferred container
images as base image.

:::info
As stated in the description above, base image usage is particularly aligned for container images, that we distribute by
publishing them on DockerHub. In case you are using Docker images for build or testing purposes (for example _pandoc_ or
_cypress_, etc.) and you do not publish the images, you can use other publicly available image, as long as the tools are
open source license compliant.

For automated TRG checks, you can skip base image checks on Dockerfiles by declaring it in the `.tractusx` metadata
files. Details can be found in
the [metadata file documentation](https://github.com/eclipse-tractusx/tractusx-quality-checks/blob/main/docs/metadata_file.md)
:::

### Image Tag to Use

:::caution Image Security
This part of the TRG contributes to the security of your application's container image and helps to keep the basis of
the image as up-to-date as possible.
:::

To keep application images compliant, up-to-date and secure it is mandatory to use image tags which allows to rebuild
the applications container image without touching the `DOCKERFILE` each time to adjust the version of the base image (
e.g. to fix vulnerabilities in the base image, see [Base Image Security](#base-image-security)).

Whenever possible, do not use an image tag containing a patch version, instead, use an image tag containing either minor
or major version:

:::warning Do not use image tag with patch version

```DOCKERFILE
FROM alpine:3.18.5 as BUILDER

COPY . /app/build
WORKDIR /app/build
RUN build

FROM alpine:3.18.5

COPY --from=BUILDER /app/build /app
[...]
```

:::

:::tip Use image tag with minor or major version

```DOCKERFILE
FROM alpine:3 as BUILDER

COPY . /app/build
WORKDIR /app/build
RUN build

FROM alpine:3.18

COPY --from=BUILDER /app/build /app

[...]
```

:::

Using minor image tags instead of patch level image tags avoid to touch the applications `DOCKERFILE` to fix a
potential problem inside the base image. With the next release of the Eclipse-Tractus-X application/component an updated
base image will be used for the application, if available.

### Base Image Security

We trust in the maintenance and security mechanisms of the base images which are aligned with this TRG (see [table
above](#base-images-to-use)). Don't try to fix vulnerabilities in base images. Instead, we focus ourselves to keep our
code free of vulnerabilities.

You shall not change the content of the base image to fix vulnerabilities of the base image using package
manager update mechanisms inside a `DOCKERFILE`:

```DOCKERFILE
FROM alpine:3.18.2

RUN apk update && apk upgrade
[...]
```

When using minor image tags of the base image, we automatically participate of fixed vulnerabilities in the base image.
