"use strict";(self.webpackChunkeclipse_tractusx_github_io=self.webpackChunkeclipse_tractusx_github_io||[]).push([[95089],{28453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>a});var n=i(96540);const r={},s=n.createContext(r);function o(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(s.Provider,{value:t},e.children)}},52039:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"release/trg-8/trg-8-04","title":"TRG 8.04 - Trivy","description":"| Status | Created     | Post-History    |","source":"@site/docs/release/trg-8/trg-8-04.md","sourceDirName":"release/trg-8","slug":"/release/trg-8/trg-8-04","permalink":"/docs/release/trg-8/trg-8-04","draft":false,"unlisted":false,"editUrl":"https://github.com/eclipse-tractusx/eclipse-tractusx.github.io/tree/main/docs/release/trg-8/trg-8-04.md","tags":[],"version":"current","frontMatter":{"title":"TRG 8.04 - Trivy"},"sidebar":"docs","previous":{"title":"TRG 8.03 - TruffleHog","permalink":"/docs/release/trg-8/trg-8-03"},"next":{"title":"TRG 8.05 - Dependabot","permalink":"/docs/release/trg-8/trg-8-05"}}');var r=i(74848),s=i(28453);const o={title:"TRG 8.04 - Trivy"},a=void 0,l={},c=[{value:"Why",id:"why",level:2},{value:"Description",id:"description",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Status"}),(0,r.jsx)(t.th,{children:"Created"}),(0,r.jsx)(t.th,{children:"Post-History"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Update"}),(0,r.jsx)(t.td,{children:"26-Jun-2024"}),(0,r.jsx)(t.td,{children:"Workflow update"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Active"}),(0,r.jsx)(t.td,{children:"26-Mar-2024"}),(0,r.jsx)(t.td,{children:"Initial release"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Draft"}),(0,r.jsx)(t.td,{children:"04-Mar-2024"}),(0,r.jsx)(t.td,{children:"Draft release"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"why",children:"Why"}),"\n",(0,r.jsx)(t.p,{children:"Trivy scans our Docker containers to accurately identify and remediate vulnerabilities in OS packages and application dependencies, ensuring our environment remains secure."}),"\n",(0,r.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,r.jsx)(t.p,{children:"Trivy should be used if your project or repository builds containers and publishes them to Docker Hub."}),"\n",(0,r.jsx)(t.p,{children:"Configure your GitHub Actions to include:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"workflow_dispatch"}),": Manual workflow execution."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"schedule"}),": Schedule the workflow to run at least once a week with ",(0,r.jsx)(t.code,{children:"0 0 * * 0"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Because Trivy scans the published image on Docker Hub, running it on a ",(0,r.jsx)(t.code,{children:"schedule"})," suffices, removing the necessity to execute it on every push and pull request. Optionally, the local build in the pipeline run can be scanned, using the ",(0,r.jsx)(t.code,{children:"push"})," and ",(0,r.jsx)(t.code,{children:"pull_request"})," triggers for these scans."]}),"\n",(0,r.jsxs)(t.p,{children:["In the Trivy workflow, the Docker Hub image scanned must be the currently supported version, not necessarily the ",(0,r.jsx)(t.code,{children:"latest"})," image."]}),"\n",(0,r.jsxs)(t.p,{children:["If multiple Docker images, such as frontend and backend, are published from the repository, configure a scan for each image either by using the ",(0,r.jsx)(t.code,{children:"matrix"})," option or by duplicating the necessary steps from the example workflow."]}),"\n",(0,r.jsx)(t.p,{children:"Findings appear in the GitHub Advanced Security Dashboard. Dismiss high/error findings as non-exploitable or false positives with required justification in the vulnerability alert."}),"\n",(0,r.jsxs)(t.admonition,{type:"caution",children:[(0,r.jsx)(t.p,{children:"Address high severity findings; it is recommended to also address medium severity findings."}),(0,r.jsxs)(t.p,{children:["Due to IP considerations, base images with findings must not be updated arbitrarily, as outlined in ",(0,r.jsx)(t.a,{href:"https://eclipse-tractusx.github.io/docs/release/trg-4/trg-4-02",children:"TRG4"}),"."]})]}),"\n",(0,r.jsxs)(t.p,{children:["You can tailor the failure conditions (",(0,r.jsx)(t.code,{children:"exit-code"}),", ",(0,r.jsx)(t.code,{children:"severity"}),") for high severity issues in the workflow to suit your team's preferences."]}),"\n",(0,r.jsx)(t.p,{children:"Example Trivy workflow:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yml",children:'name: "Trivy"\n\non:\n  schedule:\n    - cron: "0 0 * * 0"\n  workflow_dispatch:\n\n\njobs:\n  analyze:\n    name: Analyze\n    runs-on: ubuntu-latest\n    permissions:\n      actions: read\n      contents: read\n      security-events: write\n\n    steps:\n      - name: Run Trivy vulnerability scanner\n        uses: aquasecurity/trivy-action@0.18.0\n        with:\n          image-ref: "tractusx/<your-image>:<version>" # Pull image from Docker Hub and run Trivy vulnerability scanner\n          format: "sarif"\n          output: "trivy-results.sarif"\n          severity: "CRITICAL,HIGH" # While vulnerabilities of all severities are reported in the SARIF output, the exit code and workflow failure are triggered only by these specified severities (CRITICAL or HIGH).\n          hide-progress: false\n          exit-code: "1" # Trivy exits with code 1 if vulnerabilities are found, causing the workflow step to fail.\n          limit-severities-for-sarif: true\n\n      - name: Upload Trivy scan results to GitHub Security tab\n        uses: github/codeql-action/upload-sarif@v3\n        if: always()\n        with:\n          sarif_file: "trivy-results.sarif"\n'})})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);