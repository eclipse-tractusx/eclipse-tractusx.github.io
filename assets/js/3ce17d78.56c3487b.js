"use strict";(self.webpackChunkeclipse_tractusx_github_io=self.webpackChunkeclipse_tractusx_github_io||[]).push([[21207],{28453:(e,t,r)=>{r.d(t,{R:()=>i,x:()=>a});var s=r(96540);const n={},l=s.createContext(n);function i(e){const t=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),s.createElement(l.Provider,{value:t},e.children)}},71580:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"release/trg-5/trg-5-02","title":"TRG 5.02 - Chart structure","description":"| Status | Created     | Post-History                                           |","source":"@site/docs/release/trg-5/trg-5-02.md","sourceDirName":"release/trg-5","slug":"/release/trg-5/trg-5-02","permalink":"/docs/release/trg-5/trg-5-02","draft":false,"unlisted":false,"editUrl":"https://github.com/eclipse-tractusx/eclipse-tractusx.github.io/tree/main/docs/release/trg-5/trg-5-02.md","tags":[],"version":"current","frontMatter":{"title":"TRG 5.02 - Chart structure"},"sidebar":"docs","previous":{"title":"TRG 5.01 - Helm Chart requirements","permalink":"/docs/release/trg-5/trg-5-01"},"next":{"title":"TRG 5.03 - Version strategy","permalink":"/docs/release/trg-5/trg-5-03"}}');var n=r(74848),l=r(28453);const i={title:"TRG 5.02 - Chart structure"},a=void 0,c={},h=[{value:"Why",id:"why",level:2},{value:"Description",id:"description",level:2},{value:"Chart Location",id:"chart-location",level:3},{value:"Chart File Structure",id:"chart-file-structure",level:3},{value:"The <code>Chart.yaml</code> File",id:"the-chartyaml-file",level:4},{value:"The <code>LICENSE</code> File",id:"the-license-file",level:4},{value:"The <code>README.md</code> File",id:"the-readmemd-file",level:4},{value:"The <code>values.yaml</code> File",id:"the-valuesyaml-file",level:4},{value:"The <code>crds</code> Directory",id:"the-crds-directory",level:4},{value:"The <code>templates</code> Directory",id:"the-templates-directory",level:4},{value:"The <code>templates/NOTES.txt</code> File",id:"the-templatesnotestxt-file",level:4},{value:"<code>.helmignore</code>",id:"helmignore",level:4}];function o(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Status"}),(0,n.jsx)(t.th,{children:"Created"}),(0,n.jsx)(t.th,{children:"Post-History"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Draft"}),(0,n.jsx)(t.td,{children:"17-Jul-2023"}),(0,n.jsx)(t.td,{children:"templates/NOTES.txt made optional"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Active"}),(0,n.jsx)(t.td,{children:"10-Jan-2023"}),(0,n.jsx)(t.td,{children:"add prerequisite and TL;DR as requirement in README.md"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Active"}),(0,n.jsx)(t.td,{children:"10-Nov-2022"}),(0,n.jsx)(t.td,{children:"Initial release"})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"why",children:"Why"}),"\n",(0,n.jsx)(t.p,{children:"Following best practices when creating the chart helps everyone better understand, deploy and test the product. Having\nsimilar structure for every Helm chart enables easy understand, simple implementation of testing and deployment workflows."}),"\n",(0,n.jsx)(t.p,{children:"Having the helm chart in the same directory than everyone else allows for easy finding the right helm chart."}),"\n",(0,n.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,n.jsxs)(t.p,{children:["Each Helm chart ",(0,n.jsx)(t.strong,{children:"should"})," follow a specific structure. Helm\nprovides ",(0,n.jsx)(t.a,{href:"https://helm.sh/docs/chart_template_guide/getting_started/",children:"recommendations for creating charts"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["For Eclipse Tractus-X Helm charts the following requirements ",(0,n.jsx)(t.strong,{children:"must"})," be met:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Helm chart location inside Git repository"}),"\n",(0,n.jsx)(t.li,{children:"Helm chart file structure defined below"}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"chart-location",children:"Chart Location"}),"\n",(0,n.jsxs)(t.p,{children:["Helm charts ",(0,n.jsx)(t.strong,{children:"must"})," be located inside the ",(0,n.jsx)(t.code,{children:"/charts"})," directory of the Git repository."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-text",children:"charts/\n  chartNameA/\n    Chart.yaml\n    ...\n  chartNameB/\n    Chart.yaml\n    ...\nAUTHORS.md\nDEPENDENCIES.md\nLICENSE\nREADME.md\n"})}),"\n",(0,n.jsxs)(t.p,{children:["For further details about the Git repository structure, please refer to ",(0,n.jsx)(t.a,{href:"/docs/release/trg-2/trg-2-3",children:"TRG 2.03 - Repo\nStructure"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"chart-file-structure",children:"Chart File Structure"}),"\n",(0,n.jsxs)(t.admonition,{title:"License/Copyright Headers required",type:"danger",children:[(0,n.jsxs)(t.p,{children:["It is ",(0,n.jsx)(t.strong,{children:"mandatory to add a valid license/copyright header"})," to each file (except of rendered files, e.g. Markdown files) in the\nGit repository!"]}),(0,n.jsxs)(t.p,{children:["For further details, please refer to ",(0,n.jsx)(t.a,{href:"/docs/release/trg-2/trg-2-3",children:"TRG 2.03"}),"."]})]}),"\n",(0,n.jsx)(t.p,{children:"For Eclipse Tractus-X Helm charts we expect the following charts structure as a minimal set (except of optional parts):"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-text",children:"chartName/\n  .helmignore          # mandatory\n  Chart.yaml           # mandatory\n  LICENSE              # mandatory\n  README.md            # mandatory\n  values.yaml          # mandatory\n  crds/                # optional\n  templates/           # mandatory, except of umbrella Helm charts\n  templates/NOTES.txt  # optional \n"})}),"\n",(0,n.jsxs)(t.p,{children:["For further details on Helm chart basics, please refer to ",(0,n.jsx)(t.a,{href:"https://helm.sh/docs/topics/charts/",children:"Helm documentation"}),"."]}),"\n",(0,n.jsxs)(t.h4,{id:"the-chartyaml-file",children:["The ",(0,n.jsx)(t.code,{children:"Chart.yaml"})," File"]}),"\n",(0,n.jsxs)(t.p,{children:["The following represents the minimum set of expected fields in ",(0,n.jsx)(t.code,{children:"Chart.yaml"})," file:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-yaml",children:"apiVersion: The chart API Version\nname: The name of the chart\nappVersion: The application version the chart will install\nversion: A SemVer 2 version of the chart\ndescription: A brief description of the chart\nhome: The URL of the product home page\nsources:\n  - A list of URLs to source code of this project\ndependencies: # A list of the chart requirements (if any)\n  - name: The name of the chart\n    version: The version of the chart\n    repository: The repository URL\nmaintainers: # Optional, could become mandatory in Eclipse repositories\n  - name: Maintainers name\n    email: optional\n    url: A URL for the maintainer, optional\n"})}),"\n",(0,n.jsxs)(t.p,{children:["For further details about the ",(0,n.jsx)(t.code,{children:"Chart.yaml"})," file please refer to ",(0,n.jsx)(t.a,{href:"https://helm.sh/docs/topics/charts/#the-chartyaml-file",children:"Helm\ndocumentation"}),"."]}),"\n",(0,n.jsxs)(t.h4,{id:"the-license-file",children:["The ",(0,n.jsx)(t.code,{children:"LICENSE"})," File"]}),"\n",(0,n.jsxs)(t.p,{children:["The file ",(0,n.jsx)(t.strong,{children:"must"})," contain the ",(0,n.jsx)(t.a,{href:"https://www.apache.org/licenses/LICENSE-2.0.txt",children:"Apache 2.0 License"}),"."]}),"\n",(0,n.jsxs)(t.h4,{id:"the-readmemd-file",children:["The ",(0,n.jsx)(t.code,{children:"README.md"})," File"]}),"\n",(0,n.jsxs)(t.p,{children:["The README.md file ",(0,n.jsx)(t.strong,{children:"must"})," contain:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"a brief explanation of what the Helm chart will install"}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:'a section of "Prerequisites" includes the required kubernetes version, helm version and other necessary prerequisites and their versions. Example:'}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-markdown",children:"- Kubernetes 1.19+\n- Helm 3.2.0+\n- PV provisioner support in the underlying infrastructure\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:'a section of "TL;DR" that includes the helm commands to add and install the helm chart, Example:'}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"helm repo add my-repo https://charts.bitnami.com/bitnami\nhelm install my-release my-repo/postgresql\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["documentation of default values for this Helm chart (",(0,n.jsx)(t.a,{href:"https://github.com/norwoodj/helm-docs#helm-docs",children:(0,n.jsx)(t.em,{children:"helm-docs"})}),"\nmay help)."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.h4,{id:"the-valuesyaml-file",children:["The ",(0,n.jsx)(t.code,{children:"values.yaml"})," File"]}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"values.yaml"})," file contains all necessary variables the Helm chart requires for successful installation. At the same\ntime this enables users to override the default values."]}),"\n",(0,n.jsxs)(t.p,{children:["For best practices on ",(0,n.jsx)(t.code,{children:"values.yaml"})," files, please refer to ",(0,n.jsx)(t.a,{href:"/docs/release/trg-5/trg-5-05",children:"TRG 5.05 - Chart Values"})," or ",(0,n.jsx)(t.a,{href:"https://helm.sh/docs/chart_template_guide/values_files/",children:"Helm\ndocumentation"}),"."]}),"\n",(0,n.jsxs)(t.admonition,{title:"multiple values files not allowed",type:"caution",children:[(0,n.jsxs)(t.p,{children:["All default values ",(0,n.jsx)(t.strong,{children:"must"})," be introduced with ",(0,n.jsx)(t.code,{children:"values.yaml"})," file to successfully install the Helm chart."]}),(0,n.jsxs)(t.p,{children:["There ",(0,n.jsx)(t.strong,{children:"must"})," be no additional ",(0,n.jsx)(t.code,{children:"values-xyz.yaml"})," files, e.g. to specify environment specific values. Only ",(0,n.jsx)(t.code,{children:"values.yaml"})," file\nis allowed!"]})]}),"\n",(0,n.jsxs)(t.h4,{id:"the-crds-directory",children:["The ",(0,n.jsx)(t.code,{children:"crds"})," Directory"]}),"\n",(0,n.jsx)(t.p,{children:"If the Helm chart installs custom resource definitions, this directory is the place to locate the manifest files in."}),"\n",(0,n.jsxs)(t.p,{children:["For further details, refer to ",(0,n.jsx)(t.a,{href:"https://helm.sh/docs/topics/charts/#custom-resource-definitions-crds",children:"Helm\ndocumentation"}),"."]}),"\n",(0,n.jsxs)(t.h4,{id:"the-templates-directory",children:["The ",(0,n.jsx)(t.code,{children:"templates"})," Directory"]}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"templates"})," directory contains manifest files, which will be deployed during Helm chart installation. For further\ndetails, refer to ",(0,n.jsx)(t.a,{href:"https://helm.sh/docs/topics/charts/#template-files",children:"Helm documentation"}),"."]}),"\n",(0,n.jsxs)(t.h4,{id:"the-templatesnotestxt-file",children:["The ",(0,n.jsx)(t.code,{children:"templates/NOTES.txt"})," File"]}),"\n",(0,n.jsxs)(t.p,{children:["The content of ",(0,n.jsx)(t.code,{children:"templates/NOTES.txt"})," will be printed after Helm chart installation. The file is evaluated as a template\nfile with all possibilities of templating."]}),"\n",(0,n.jsx)(t.h4,{id:"helmignore",children:(0,n.jsx)(t.code,{children:".helmignore"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:".helmignore"})," file should contain as a minimal set the following entries:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-gitignore",children:"# Accept only values.yaml\nvalues?*.yaml\nvalues?*.yml\n"})})]})}function d(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}}}]);