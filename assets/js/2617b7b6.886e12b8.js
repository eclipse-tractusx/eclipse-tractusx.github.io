"use strict";(self.webpackChunkeclipse_tractusx_github_io=self.webpackChunkeclipse_tractusx_github_io||[]).push([[71285],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(a),h=i,m=p["".concat(s,".").concat(h)]||p[h]||u[h]||r;return a?n.createElement(m,o(o({ref:t},d),{},{components:a})):n.createElement(m,o({ref:t},d))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},34143:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var n=a(87462),i=(a(67294),a(3905));const r={id:"Specification",title:"Specification",description:"PCF-Exchange-KIT",sidebar_position:3},o=void 0,l={unversionedId:"kits/PCF Exchange Kit/Software Development View/Specification",id:"kits/PCF Exchange Kit/Software Development View/Specification",title:"Specification",description:"PCF-Exchange-KIT",source:"@site/docs-kits/kits/PCF Exchange Kit/Software Development View/page_software-development-view.md",sourceDirName:"kits/PCF Exchange Kit/Software Development View",slug:"/kits/PCF Exchange Kit/Software Development View/Specification",permalink:"/docs-kits/next/kits/PCF Exchange Kit/Software Development View/Specification",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"Specification",title:"Specification",description:"PCF-Exchange-KIT",sidebar_position:3},sidebar:"kits",previous:{title:"Development View",permalink:"/docs-kits/next/category/development-view-1"},next:{title:"Quality KIT",permalink:"/docs-kits/next/category/quality-kit"}},s={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Building Block View",id:"building-block-view",level:2},{value:"Sequence View",id:"sequence-view",level:2},{value:"EDC Discovery and dDTR Access",id:"edc-discovery-and-ddtr-access",level:3},{value:"PCF Request",id:"pcf-request",level:3},{value:"PCF Update",id:"pcf-update",level:3},{value:"API Calls",id:"api-calls",level:4},{value:"Payload for Requesting PCF Sub Model",id:"payload-for-requesting-pcf-sub-model",level:5},{value:"Payloads for EDC Asset",id:"payloads-for-edc-asset",level:4},{value:"Payload for EDC Data Asset PCF",id:"payload-for-edc-data-asset-pcf",level:5},{value:"Payload for EDC Policy",id:"payload-for-edc-policy",level:4},{value:"Payload to create a SSI based Policy",id:"payload-to-create-a-ssi-based-policy",level:5},{value:"Payload Contract Definition",id:"payload-contract-definition",level:4},{value:"Error Handling",id:"error-handling",level:2},{value:"Standards",id:"standards",level:2},{value:"Used CX Standards",id:"used-cx-standards",level:3},{value:"Other Standards",id:"other-standards",level:2},{value:"NOTICE",id:"notice",level:2}],d={toc:c};function p(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"PCF Exchange kit banner",src:a(32037).Z,width:"285",height:"244"})),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"The developer view provides a detailed guide on how to utilize the PCF exchange KIT effectively. Developers will learn how to integrate the KIT into their applications and make use of the feature of exchanging PCF values via the Catena-X network.\nIT-administrators will learn how they need to provide PCF data and which components are required."),(0,i.kt)("p",null,"This KIT covers various aspects, starting from how to utilize the available API endpoints, the used data models and how to make them available to the Catena-X network."),(0,i.kt)("h2",{id:"building-block-view"},"Building Block View"),(0,i.kt)("p",null,"The following figure shows the current high level architecture of the PCF Exchange use case. It is build on an asynchronous data exchange."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Building Block View",src:a(45526).Z,width:"3100",height:"2115"})),(0,i.kt)("h2",{id:"sequence-view"},"Sequence View"),(0,i.kt)("p",null,"The following chapter illustrates the process from searching for an EDC point, to querying a PCF value, and finally transmitting the requested value."),(0,i.kt)("h3",{id:"edc-discovery-and-ddtr-access"},"EDC Discovery and dDTR Access"),(0,i.kt)("p",null,"In order to receive the EDC endpoints for a requested partner, the EDC Discovery Service is used, following the ",(0,i.kt)("a",{parentName:"p",href:"https://catenax-ev.github.io/docs/next/standards/CX-0001-EDCDiscoveryAPI"},"CX-0001")," EDC Discovery API standard. Therefor, at least the BPNL (Business Partner Number Legal) entity needs to be known. For more details please refer to the Catena-X standard above."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"EDCDiscoveryAndDTRAccess",src:a(94854).Z,width:"1621",height:"1366"})),(0,i.kt)("h3",{id:"pcf-request"},"PCF Request"),(0,i.kt)("p",null,"In order to request PCF values via the PCF API endpoint first of all the EDC PCF asset needs to be identified. Therefor, the decentralized Digital Twin Registry (dDTR) is used. Data providers must register their dDTR(s) as EDC assets following the ",(0,i.kt)("a",{parentName:"p",href:"https://catenax-ev.github.io/docs/next/standards/CX-0002-DigitalTwinsInCatenaX"},"CX-0002")," Digital Twins in Catena-X standard. After identifying the dDTR, the digital twin with the related PCF submodel can be looked up (see ",(0,i.kt)("a",{parentName:"p",href:"#api-calls"},"API calls [0003 +0004]"),"). An example is documented ",(0,i.kt)("a",{parentName:"p",href:"#payload-for-requesting-pcf-sub-model"},"here"),"."),(0,i.kt)("p",null,"After successfully locating the corresponding material twin containing a PCF submodel, the EDC asset containing the PCF request endpoint can be extracted (example payload can be found ",(0,i.kt)("a",{parentName:"p",href:"#payload-for-edc-data-asset-pcf"},"here"),") and the query for a PCF dataset can be initiated, as illustrated in the attached sequence diagram."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"PCF Request",src:a(96033).Z,width:"2796",height:"2778"})),(0,i.kt)("p",null,"In case no matching material twin or PCF submodel exists, the flow falls back to a direct lookup of an EDC asset containing the PCF request endpoint provided within the offers of any EDC registered for the data provider's BPNL."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"PCF Request without Twin or Submodel",src:a(48177).Z,width:"2685",height:"2336"})),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Note"),"\nThe API wrapper shown in the sequence diagrams is optional. The management API of the EDC can also be used directly.")),(0,i.kt)("h3",{id:"pcf-update"},"PCF Update"),(0,i.kt)("p",null,"The sequence diagram provided below presents an example of a PCF update flow. An update is feasible only for assets that have been previously requested at least once, as demonstrated in ",(0,i.kt)("a",{parentName:"p",href:"#pcf-request"},"PCF Request"),". Proactive updates without a prior request are not achievable with the current version."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"PCF Update",src:a(5483).Z,width:"2309",height:"1036"})),(0,i.kt)("h4",{id:"api-calls"},"API Calls"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Call"),(0,i.kt)("th",{parentName:"tr",align:null},"Method"),(0,i.kt)("th",{parentName:"tr",align:null},"Path"),(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://eclipse-tractusx.github.io/docs-kits/next/kits/Digital%20Twin%20Kit/Software%20Development%20View/API%20EDC%20Discovery/post-list-of-bpns-or-an-empty-array-to-retrieve-available-company-connector-authorization-required-roles-view-connectors"},"001")," (Lookup EDC endpoints)"),(0,i.kt)("td",{parentName:"tr",align:null},"POST"),(0,i.kt)("td",{parentName:"tr",align:null},"/api/administration/Connectors/discovery/"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"[<Company's BPNL>]"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://eclipse-tractusx.github.io/docs-kits/next/kits/tractusx-edc/docs/samples/management-api-v2-walkthrough/catalog"},"002")," (Look up dDTR)"),(0,i.kt)("td",{parentName:"tr",align:null},"POST"),(0,i.kt)("td",{parentName:"tr",align:null},"/v2/catalog/request"),(0,i.kt)("td",{parentName:"tr",align:null},"--\x3e Lookup Asset in the EDC catalog (EDC asset type data.core.digitalTwinRegistry)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://eclipse-tractusx.github.io/docs-kits/next/kits/Digital%20Twin%20Kit/Software%20Development%20View/API%20AAS%20Discovery/get-all-asset-administration-shell-ids-by-asset-link"},"003")," (Lookup Twin ID)"),(0,i.kt)("td",{parentName:"tr",align:null},"GET"),(0,i.kt)("td",{parentName:"tr",align:null},"/lookup/shells"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'assetIds= [{"key": "manufacturerPartId", "value":"mat345",{"key":"digitalTwinType", "value": "PartType"}}]'))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://eclipse-tractusx.github.io/docs-kits/next/kits/Digital%20Twin%20Kit/Software%20Development%20View/API%20AAS%20Registry/get-all-asset-administration-shell-descriptors"},"004")," (Lookup PCF submodel/EDC asset ID)"),(0,i.kt)("td",{parentName:"tr",align:null},"GET"),(0,i.kt)("td",{parentName:"tr",align:null},"/shell-descriptors"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"{DIGITAL TWIN ID}"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{target:"_blank",href:a(63814).Z},"005")," (Requesting PCF value)"),(0,i.kt)("td",{parentName:"tr",align:null},"GET"),(0,i.kt)("td",{parentName:"tr",align:null},"/productIds"),(0,i.kt)("td",{parentName:"tr",align:null},"{productId}")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{target:"_blank",href:a(63814).Z},"006")," (Sending PCF value)"),(0,i.kt)("td",{parentName:"tr",align:null},"PUT"),(0,i.kt)("td",{parentName:"tr",align:null},"/productIds"),(0,i.kt)("td",{parentName:"tr",align:null},"{productId}")))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The assetIds under ","[003]"," must be base64 encoded!"),(0,i.kt)("li",{parentName:"ul"},'When responding an PCF exchange request, the "requestID" is mandatory in the PUT call.'),(0,i.kt)("li",{parentName:"ul"},'When sharing a PCF update, the "requestID" is NOT allowed in the PUT call.'),(0,i.kt)("li",{parentName:"ul"},'The EDC asset used to receive a PCF is NOT looked up through AAS, but identified by type ("data.pcf.exchangeEndpoint").'),(0,i.kt)("li",{parentName:"ul"},"The Open API specification defining all mandatory PCF Exchange endpoints and the data structures transfered through those can be found ",(0,i.kt)("a",{target:"_blank",href:a(63814).Z},"here"))),(0,i.kt)("h5",{id:"payload-for-requesting-pcf-sub-model"},"Payload for Requesting PCF Sub Model"),(0,i.kt)("p",null,"The following JSON shows the structure of a registered PCF submodel in the DTR. The subprotocolBody is used for asset bundling. For this, the ",(0,i.kt)("a",{parentName:"p",href:"https://catenax-ev.github.io/docs/next/standards/CX-0002-DigitalTwinsInCatenaX"},"CX-0002")," Digital Twins in Catena-X standard needs to be followed."),(0,i.kt)("p",null,"The digital twin id can be searched via the ",(0,i.kt)("inlineCode",{parentName:"p"},"manufacturerPartId")," and the ",(0,i.kt)("inlineCode",{parentName:"p"},'digitalTwinType:"PartType"'),"."),(0,i.kt)("p",null,"The PCF submodel must be registered with the ",(0,i.kt)("inlineCode",{parentName:"p"},"idshort: PCFExchangeEndpoint"),"."),(0,i.kt)("details",null,(0,i.kt)("summary",null,"PCFExchange Endpoint of a DigitalTwin (JSON)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "description": [\n        {\n            "language": "en",\n            "text": "PCF endpoint for material \'mat345\'"\n        }\n    ],\n    "idShort": "PCFExchangeEndpoint",\n    "identification": "urn:uuid:205cf8d1-8f07-483c-9c5b-c8d706c7d05d",\n    "semanticId": {\n       "type": "ExternalReference",\n       "keys": [\n          {\n             "type": "GlobalReference",\n             "value": "urn:samm:io.catenax.pcf:7.0.0#Pcf"\n           }\n       ]\n    },\n    "endpoints": [\n        {\n            "interface": "PCF-1.1",\n            "protocolInformation": {\n                "href": "https://edc.data.plane/productIds/mat345",\n                "endpointProtocol": "HTTP",\n                "endpointProtocolVersion": ["1.1"],\n                "subprotocol": "DSP",\n                "subprotocolBody": "id=c34018ab-5820-4065-9087-416d78e1ab60;dspEndpoint=https://some.controlplane.url:7173/api/v1/dsp",\n                "subprotocolBodyEncoding": "plain"\n            }\n        }\n    ]\n}\n'))),(0,i.kt)("h4",{id:"payloads-for-edc-asset"},"Payloads for EDC Asset"),(0,i.kt)("h5",{id:"payload-for-edc-data-asset-pcf"},"Payload for EDC Data Asset PCF"),(0,i.kt)("p",null,"The following JSON shows the EDC Asset for a PCF defined in the EDC using the asset bundling mentioned under ",(0,i.kt)("a",{parentName:"p",href:"#api-calls"},"Payload for Requesting PCF Sub Model"),"."),(0,i.kt)("details",null,(0,i.kt)("summary",null,"PCFExchange Asset Definition (JSON)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "@context": {\n        "edc": "https://w3id.org/edc/v0.0.1/ns/",\n        "odrl": "http://www.w3.org/ ns/odrl/2/",\n        "dcat": "http://www.w3.org/ns/dcat#",\n        "dct": "http://purl.org/dc/terms/",\n        "rdfs": "http://www.w3.org/2000/01/rdf-schema#",\n        "cx-taxo": "https://w3id.org/catenax/taxonomy#",\n        "cx-common": "https://w3id.org/catenax/ontology/common#",\n        "aas-semantics": "https://admin-shell.io/aas/3/0/HasSemantics/"\n    },\n    "@id": "c34018ab-5820-4065-9087-416d78e1ab60",\n    "@type": "edc:Asset",\n    "edc:properties": {\n        "rdfs:label": "PCF Data",\n        "rdfs:comment": "Endpoint for PCF data",\n        "cx-common:version": "1.1",\n        "aas-semantics:semanticId": {"@id":"urn:samm:io.catenax.pcf:7.0.0#Pcf"},\n        "edc:contentType": "application/json",\n        "dct:type": {"@id":"cx-taxo:PcfExchange"}\n    },\n    "edc:dataAddress": {\n        "edc:type": "HttpData",\n        "edc:baseUrl": "https://some.url/service",\n        "edc:proxyBody": "true",\n        "edc:proxyPath": "true",\n        "edc:proxyQueryParams": "true",\n        "edc:proxyMethod": "true",\n        "edc:contentType": "application/json"\n    }\n}\n'))),(0,i.kt)("h4",{id:"payload-for-edc-policy"},"Payload for EDC Policy"),(0,i.kt)("p",null,"The following JSON is a policy definition including the ",(0,i.kt)("em",{parentName:"p"},"mandatory"),' policy constraints for "active membership", "signed frameworkagreement" and "pcf base usage purpose". The ',(0,i.kt)("a",{parentName:"p",href:"https://catenax-ev.github.io/docs/next/regulatory-framework/20000ft/use-case-pcf-exchange"},"framework agreement document")," is published via the association and available via the Catena-X homepage. The membership credential is automatically created after successfully finishing the onboarding process."),(0,i.kt)("p",null,"In addition an ",(0,i.kt)("em",{parentName:"p"},"optional")," constraint for an existing tenant-specific bilateral contract can be added. It should reference the contract number and is NOT backed up by verifiable credentials. Nevertheless it will be checked on a syntactical level during contract negotiation. If such a contract refererence should be used, a specific usage policy per tenant is needed, as constraint concatenation via OR is not recommended."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Note"),"\nMore informations can be found in the official ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/catenax-eV/cx-odrl-profile/blob/main/profile.md"},"ODRL Profile Definition"),".")),(0,i.kt)("h5",{id:"payload-to-create-a-ssi-based-policy"},"Payload to create a SSI based Policy"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"SSI based Policy (JSON)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "@context": {\n        "@vocab": "https://w3id.org/edc/v0.0.1/ns/"\n    },\n    "@id": "a343fcbf-99fc-4ce8-8e9b-148c97605aab",\n    "policy": {\n        "@context": [\n            "https://www.w3.org/ns/odrl.jsonld",\n            {\n                "cx-policy": "https://w3id.org/catenax/policy/v1.0.0/"\n            }\n        ],\n        "@type": "Policy",\n        "profile": "cx-policy:profile2405",\n        "permission": [\n            {\n                "action": "use",\n                "constraint": {\n                    "and": [\n                        {\n                            "leftOperand": "cx-policy:ContractReference",\n                            "operator": "eq",\n                            "rightOperand": "<OptionalBilateralContractReferenceNumber>"\n                        },\n                        {\n                            "leftOperand": "cx-policy:FrameworkAgreement",\n                            "operator": "eq",\n                            "rightOperand": "DataExchangeGovernance:1.0"\n                        },\n                        {\n                            "leftOperand": "cx-policy:Membership",\n                            "operator": "eq",\n                            "rightOperand": "active"\n                        },\n                        {\n                            "leftOperand": "cx-policy:UsagePurpose",\n                            "operator": "eq",\n                            "rightOperand": "cx.pcf.base:1"\n                        }\n                    ]\n                }\n            }\n        ]\n    }\n}\n'))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Note"),"\nBe aware that - due to an open issue in EDC version 0.7.x - all criterias must be added in fixed (alphabetical) order!")),(0,i.kt)("p",null,"For more examples on how to define policies with SSI have a look ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/eclipse-tractusx/ssi-docu/blob/main/docs/architecture/cx-3-2/edc/policy.definitions.md"},"here"),"."),(0,i.kt)("h4",{id:"payload-contract-definition"},"Payload Contract Definition"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Sample Contract (JSON)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "@id": "54ef3326-42b2-4221-8c5a-3a6270d54db8",\n    "edc:accessPolicyId": "7cb20eb1-08db-4532-bd74-ad480f551654",\n    "edc:contractPolicyId": "a343fcbf-99fc-4ce8-8e9b-148c97605aab",\n    "edc:assetsSelector":[\n        {\n            "@type": "Criterion",\n            "edc:operandLeft": "@id",\n            "edc:operator": "=",\n            "edc:operandRight": "c34018ab-5820-4065-9087-416d78e1ab60"\n        }\n    ]\n}\n'))),(0,i.kt)("p",null,"Inside the contract definition, an access policy and a usage policy must be referenced. A sample for a usage policy (incl. mandatory and optional criterias) is given in the ",(0,i.kt)("a",{parentName:"p",href:"#payload-to-create-a-ssi-based-policy"},"section above"),"."),(0,i.kt)("p",null,"The content of the access policy depends on the criterias used within the usage policy. The configuration MUST ensure that only one offer (per version) for a PCF Exchange asset is visible to a client when querying the catalog."),(0,i.kt)("p",null,"The following paragraphs give options how to achieve this. These options can always be replaced by corresponding (or even more restictive) policies, as long as the requirement of delivering only one offer per PCF Exchange asset version is met:\nIf ",(0,i.kt)("em",{parentName:"p"},"no bilateral contract")," reference criteria are used ",(0,i.kt)("em",{parentName:"p"},"in any usage policy")," attached to the PCF Exchange asset, an empty access policy can be used:",(0,i.kt)("p",null),"\n",(0,i.kt)("img",{alt:"Tier1Supplier without bilateral contracts",src:a(96184).Z,width:"745",height:"398"})),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Empty Access Policy (JSON)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "@context": {\n        "@vocab": "https://w3id.org/edc/v0.0.1/ns/"\n    },\n    "@id": "7cb20eb1-08db-4532-bd74-ad480f551654",\n    "policy": {\n        "@context": [\n            "https://www.w3.org/ns/odrl.jsonld",\n            {\n                "cx-policy": "https://w3id.org/catenax/policy/v1.0.0/"\n            }\n        ],\n        "@type": "Policy",\n        "profile": "cx-policy:profile2405",\n        "permission": []\n    }\n}\n'))),(0,i.kt)("p",null,"If a ",(0,i.kt)("em",{parentName:"p"},"bilateral contract")," reference criteria is used ",(0,i.kt)("em",{parentName:"p"},"in a usage policy"),", an access policy restricting access to the contract partners BPNL ",(0,i.kt)("em",{parentName:"p"},"MUST")," be used for every usage policy holding a contract reference:",(0,i.kt)("p",null),"\n",(0,i.kt)("img",{alt:"Tier1Supplier using bilateral contracts and an open policy",src:a(60645).Z,width:"745",height:"398"})),(0,i.kt)("details",null,(0,i.kt)("summary",null,"BPN restricted Access Policy to be used with a Usage Policy containing a contract reference (JSON)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "@context": {\n        "@vocab": "https://w3id.org/edc/v0.0.1/ns/"\n    },\n    "@id": "7cb20eb1-08db-4532-bd74-ad480f551654",\n    "policy": {\n        "@context": [\n            "https://www.w3.org/ns/odrl.jsonld",\n            {\n                "cx-policy": "https://w3id.org/catenax/policy/v1.0.0/"\n            }\n        ],\n        "@type": "Policy",\n        "profile": "cx-policy:profile2405",\n        "permission": [\n            {\n                "action": "use",\n                "constraint": {\n                    "leftOperand": "BusinessPartnerNumber",\n                    "operator": "eq",\n                    "rightOperand": "BPNL00000000XXXX"\n                }\n            }\n        ]\n    }\n}\n'))),(0,i.kt)("p",null,"If ",(0,i.kt)("em",{parentName:"p"},"bilateral contract reference")," criterias are used ",(0,i.kt)("em",{parentName:"p"},"in usage policies")," and ",(0,i.kt)("em",{parentName:"p"},"in addition")," a usage policy ",(0,i.kt)("em",{parentName:"p"},"without bilateral contract references")," should be provided, an access policy restricting access to all partners without a bilateral contract reference ",(0,i.kt)("em",{parentName:"p"},"MUST")," be used for the usage policy holding no contract references.",(0,i.kt)("p",null),"\n",(0,i.kt)("img",{alt:"Tier1Supplier using bilateral contracts and an open policy",src:a(20888).Z,width:"746",height:"398"})),(0,i.kt)("p",null," The following example uses BusinessPartnerGroups to achieve this:"),(0,i.kt)("details",null,(0,i.kt)("summary",null,'BPN restricted Access Policy to be used with the "global" Usage Policy containing NO contract references (JSON)'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "@context": {\n    "@vocab": "https://w3id.org/edc/v0.0.1/ns/",\n    "odrl": "http://www.w3.org/ns/odrl/2/"\n  },\n  "@type": "PolicyDefinitionRequestDto",\n  "policy": {\n    "@type": "odrl:Set",\n    "odrl:permission": [\n      {\n        "odrl:action": "USE",\n        "odrl:constraint": {\n              "@type": "Constraint",\n              "odrl:leftOperand": "https://w3id.org/tractusx/v0.0.1/ns/BusinessPartnerGroup",\n              "odrl:operator": {\n                "@id": "odrl:eq"\n              },\n              "odrl:rightOperand": "BusinessPartnerWithoutBilateralContract"\n        }\n      }\n    ]\n  }\n}\n'))),(0,i.kt)("h2",{id:"error-handling"},"Error Handling"),(0,i.kt)("p",null,"In case no material twin or no PCF submodel is found, EDC asset type has to be used to find the endpoint needed to perform the PCF request."),(0,i.kt)("h2",{id:"standards"},"Standards"),(0,i.kt)("h3",{id:"used-cx-standards"},"Used CX Standards"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://catenax-ev.github.io/docs/next/standards/CX-0001-EDCDiscoveryAPI"},"CX-0001 EDC Discovery API v1.0.2")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://catenax-ev.github.io/docs/next/standards/CX-0002-DigitalTwinsInCatenaX"},"CX-0002 Digital Twins in Catena-X v2.2.0")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://catenax-ev.github.io/docs/next/standards/CX-0003-SAMMSemanticAspectMetaModel"},"CX-0003 SAMMSemanticAspectMetaModel v1.1.0")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://catenax-ev.github.io/docs/next/standards/CX-0018-DataspaceConnectivity"},"CX-0018 Dataspace Connectivity v3.1.0")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://catenax-ev.github.io/docs/next/standards/CX-0126-IndustryCorePartType"},"CX-0126 Industry Core: Part Type v2.0.0")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://catenax-ev.github.io/docs/next/standards/CX-0136-UseCasePCF"},"CX-0136 PCF UseCase v2.0.0"))),(0,i.kt)("h2",{id:"other-standards"},"Other Standards"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://wbcsd.github.io/tr/2023/data-exchange-protocol-20230221"},"Pathfinder Framework - v2.0.0"))),(0,i.kt)("h2",{id:"notice"},"NOTICE"),(0,i.kt)("p",null,"This work is licensed under the ",(0,i.kt)("a",{parentName:"p",href:"https://creativecommons.org/licenses/by/4.0/legalcode"},"CC-BY-4.0"),"."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"SPDX-License-Identifier: CC-BY-4.0"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 ZF Friedrichshafen AG"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 Bayerische Motoren Werke Aktiengesellschaft (BMW AG)"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 T-Systems International GmbH"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 SAP SE"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 SIEMENS AG"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 SUPPLY ON AG"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 Volkswagen AG"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 Robert Bosch GmbH"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 Mercedes Benz Group"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 BASF SE"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 CCT"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 Gris Group"),(0,i.kt)("li",{parentName:"ul"},"SPDX-FileCopyrightText: 2023, 2024 Contributors to the Eclipse Foundation"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/eclipse-tractusx/eclipse-tractusx.github.io/tree/main/docs-kits/kits/PCF%20Exchange%20Kit"},"Source URL"))))}p.isMDXComponent=!0},63814:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/catena-x-pcf-endpoint-1_1_1-3d1f285de92505c210664b7e019f0968.yaml"},45526:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/BuildingblockView-de3d6a2ba51c901052dc093276e670ff.png"},94854:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/EDCDiscoveryanddDTRAccess-b2253a5caf04e8d6486843ab909dc00b.png"},48177:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/PCFRequestWithoutTwinOrSubmodel-d9157d7885feb91375c238b4d4b903cd.png"},96033:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/PCFRequestthroughAAS-a401ae1ffae66894fca98ad7b434b817.png"},5483:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/PCFUpdatePushedThroughEDC-61779fcf28819f5464582f7bc27798cf.png"},60645:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Tier1ABCOnlyUP-725a8735f388254c53dca26d8569f522.png"},20888:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Tier1ABCUP-b99b12c68a6805bc41d2a2b69de27986.png"},96184:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Tier1AOpenUP-b4de343d4d26f4f40ea862906c3217c1.png"},32037:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/pcf-kit-icon-8499d36d4fef319e8be8195f9de6e0f1.svg"}}]);