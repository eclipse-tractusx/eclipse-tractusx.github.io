"use strict";(self.webpackChunkeclipse_tractusx_github_io=self.webpackChunkeclipse_tractusx_github_io||[]).push([[21356],{11303:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"release/trg-5/trg-5-07","title":"TRG 5.07 - Chart Dependencies","description":"| Status | Created     | Post-History              |","source":"@site/docs/release/trg-5/trg-5-07.md","sourceDirName":"release/trg-5","slug":"/release/trg-5/trg-5-07","permalink":"/docs/release/trg-5/trg-5-07","draft":false,"unlisted":false,"editUrl":"https://github.com/eclipse-tractusx/eclipse-tractusx.github.io/tree/main/docs/release/trg-5/trg-5-07.md","tags":[],"version":"current","frontMatter":{"title":"TRG 5.07 - Chart Dependencies"},"sidebar":"docs","previous":{"title":"TRG 5.06 - Application Configuration","permalink":"/docs/release/trg-5/trg-5-06"},"next":{"title":"TRG 5.08 - Product Helm Chart","permalink":"/docs/release/trg-5/trg-5-08"}}');var s=t(74848),r=t(28453);const d={title:"TRG 5.07 - Chart Dependencies"},l=void 0,a={},c=[{value:"Why",id:"why",level:2},{value:"Description",id:"description",level:2},{value:"Helm dependency example",id:"helm-dependency-example",level:2},{value:"Installing a chart with dependencies",id:"installing-a-chart-with-dependencies",level:2},{value:"Aligning dependency versions",id:"aligning-dependency-versions",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Status"}),(0,s.jsx)(n.th,{children:"Created"}),(0,s.jsx)(n.th,{children:"Post-History"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Update"}),(0,s.jsx)(n.td,{children:"20-Sep-2023"}),(0,s.jsx)(n.td,{children:"Adjust PostgreSQL version"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Active"}),(0,s.jsx)(n.td,{children:"07-Mar-2023"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Draft"}),(0,s.jsx)(n.td,{children:"02-Dec-2022"}),(0,s.jsx)(n.td,{children:"n/a"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"why",children:"Why"}),"\n",(0,s.jsx)(n.p,{children:"Dependencies like a database (postgresql) are used across Eclipse Tractus-X. It's critical to align those common dependencies when those dependencies are later replaced with hosted versions, like the database. Single instance of these dependencies that can be shared among all products in the future."}),"\n",(0,s.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(n.p,{children:["Helm chart dependencies are defined in the ",(0,s.jsx)(n.code,{children:"Chart.yaml"})," file. They are used to provide additional software (e.g. database) that is required for running the main application."]}),"\n",(0,s.jsx)(n.h2,{id:"helm-dependency-example",children:"Helm dependency example"}),"\n",(0,s.jsxs)(n.p,{children:["An example dependency definition in the ",(0,s.jsx)(n.code,{children:"Chart.yaml"})," file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"dependencies:\n  - condition: postgresql.enabled\n    alias: product-name-postgresql\n    name: postgresql\n    repository: https://charts.bitnami.com/bitnami\n    version: 12.x.x\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Usage of condition, alias and version properties are optional but highly recommended"}),"\n",(0,s.jsxs)(n.li,{children:["Add a unique alias as name to your dependency that corresponds with your product name. This can be referenced in the ",(0,s.jsx)(n.code,{children:"values.yaml"})," file"]}),"\n",(0,s.jsx)(n.li,{children:"With the condition, dependencies can be disabled/enabled on demand"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"installing-a-chart-with-dependencies",children:"Installing a chart with dependencies"}),"\n",(0,s.jsx)(n.p,{children:"The following commands have to run before installing the chart if it has dependencies:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"helm repo add [REPO_URL] #for example: https://charts.bitnami.com/bitnami\nhelm dependency update\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Then the install can be done with ",(0,s.jsx)(n.code,{children:"helm install [NAME] [CHART] [flags]"})]}),"\n",(0,s.jsx)(n.h2,{id:"aligning-dependency-versions",children:"Aligning dependency versions"}),"\n",(0,s.jsx)(n.p,{children:"The following table describes the required version of dependencies for all products. As Minor versions change rapidly, this guidance is not pinning a specifc version. Alignment also has to be coordinated across Teams through other communication means."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Name"}),(0,s.jsx)(n.th,{children:"Repo URL"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Chart version"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"App version"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"postgresql"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"https://charts.bitnami.com/bitnami",children:"Bitnami"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"12.x.x"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"15.x.x"})]})})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>l});var i=t(96540);const s={},r=i.createContext(s);function d(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);