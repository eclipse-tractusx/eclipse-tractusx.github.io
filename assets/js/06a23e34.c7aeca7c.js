"use strict";(self.webpackChunkeclipse_tractusx_github_io=self.webpackChunkeclipse_tractusx_github_io||[]).push([[90040],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(n),f=a,h=p["".concat(s,".").concat(f)]||p[f]||d[f]||i;return n?r.createElement(h,o(o({ref:t},c),{},{components:n})):r.createElement(h,o({ref:t},c))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=f;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:a,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},40184:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var r=n(87462),a=(n(67294),n(3905));const i={title:"TRG 8.03 - TruffleHog"},o=void 0,l={unversionedId:"release/trg-8/trg-8-03",id:"release/trg-8/trg-8-03",title:"TRG 8.03 - TruffleHog",description:"| Status | Created     | Post-History                                                  |",source:"@site/docs/release/trg-8/trg-8-03.md",sourceDirName:"release/trg-8",slug:"/release/trg-8/trg-8-03",permalink:"/docs/release/trg-8/trg-8-03",draft:!1,editUrl:"https://github.com/eclipse-tractusx/eclipse-tractusx.github.io/tree/main/docs/release/trg-8/trg-8-03.md",tags:[],version:"current",frontMatter:{title:"TRG 8.03 - TruffleHog"},sidebar:"docs",previous:{title:"TRG 8.02 - KICS",permalink:"/docs/release/trg-8/trg-8-02"},next:{title:"TRG 8.04 - Trivy",permalink:"/docs/release/trg-8/trg-8-04"}},s={},u=[{value:"Why",id:"why",level:2},{value:"Description",id:"description",level:2}],c={toc:u};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Status"),(0,a.kt)("th",{parentName:"tr",align:null},"Created"),(0,a.kt)("th",{parentName:"tr",align:null},"Post-History"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Update"),(0,a.kt)("td",{parentName:"tr",align:null},"27-Jun-2024"),(0,a.kt)("td",{parentName:"tr",align:null},"Switching to TruffleHog due to GitGuardian licence expiration")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Active"),(0,a.kt)("td",{parentName:"tr",align:null},"26-Mar-2024"),(0,a.kt)("td",{parentName:"tr",align:null},"Initial release")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Draft"),(0,a.kt)("td",{parentName:"tr",align:null},"04-Mar-2024"),(0,a.kt)("td",{parentName:"tr",align:null},"Draft release")))),(0,a.kt)("h2",{id:"why"},"Why"),(0,a.kt)("p",null,"TruffleHog is an open source tool designed to identify sensitive information, such as API keys, passwords, and other credentials, that may have been inadvertently committed to your code repository. This tool is expected to be used in parallel to the native GitHub Secret Scanning tool."),(0,a.kt)("h2",{id:"description"},"Description"),(0,a.kt)("p",null,"Detecting and removing these secrets is crucial for maintaining the security of your application and infrastructure. TruffleHog performs a thorough search by checking the entire repository history, not just the latest commits. This means it can find secrets that were committed in the past and might still pose a security risk."),(0,a.kt)("p",null,"Configure your GitHub Actions to include:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"workflow dispatch"),": Manual workflow execution."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"schedule"),": Schedule the workflow to run at least once a week with ",(0,a.kt)("inlineCode",{parentName:"li"},"0 0 * * 0"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"push")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"pull_request"),": Activate the workflow on both push and pull request events targeting the branch that contains the code for the currently supported version, which may not necessarily be the main branch. This is the branch from which new releases will be made.")),(0,a.kt)("p",null,"Note: ",(0,a.kt)("inlineCode",{parentName:"p"},"extra_args: --filter-entropy=4 --results=verified,unknown")),(0,a.kt)("p",null,"Including ",(0,a.kt)("inlineCode",{parentName:"p"},"extra_args: --filter-entropy=4 --results=verified,unknown")," in the GitHub Actions workflow ensures that TruffleHog focuses on detecting high-entropy strings, which are more likely to be sensitive information such as passwords or API keys. This setup also instructs TruffleHog to report both verified secrets and potential but unverified secrets, providing a comprehensive security scan that helps identify and address all possible vulnerabilities in the code."),(0,a.kt)("p",null,"Including ",(0,a.kt)("inlineCode",{parentName:"p"},"run: exit 1")," in a step of a GitHub Actions workflow, as demonstrated below, commands the workflow to halt execution. This ensures that should TruffleHog uncover any secrets during its scan, the workflow promptly terminates in failure."),(0,a.kt)("p",null,"GitHub Actions allows you to define workflows to automatically run TruffleHog scans on your code. You'll see the output that triggered the failure directly in the logs."),(0,a.kt)("p",null,"Here\u2019s how you can set it up:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yml"},'name: "TruffleHog"\n\non:\n  push:\n    branches: ["main"]\n  pull_request:\n    # The branches below must be a subset of the branches above\n    branches: ["main"]\n  schedule:\n    - cron: "0 0 * * *" # Once a day\n  workflow_dispatch:\n\npermissions:\n  actions: read\n  contents: read\n  security-events: write\n  id-token: write\n  issues: write\n\njobs:\n  ScanSecrets:\n    name: Scan secrets\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout Repository\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0  # Ensure full clone for pull request workflows\n\n      - name: TruffleHog OSS\n        id: trufflehog\n        uses: trufflesecurity/trufflehog@main\n        continue-on-error: true\n        with:\n          path: ./  # Scan the entire repository\n          base: "${{ github.event.repository.default_branch }}"  # Set base branch for comparison (pull requests)\n          extra_args: --filter-entropy=4 --results=verified,unknown --debug\n      \n      - name: Scan Results Status\n        if: steps.trufflehog.outcome == \'failure\'\n        run: exit 1  # Set workflow run to failure if TruffleHog finds secrets \n')))}p.isMDXComponent=!0}}]);