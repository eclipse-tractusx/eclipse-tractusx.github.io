"use strict";(self.webpackChunkeclipse_tractusx_github_io=self.webpackChunkeclipse_tractusx_github_io||[]).push([[79476],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(67294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,s=e.mdxType,r=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(n),d=s,h=c["".concat(l,".").concat(d)]||c[d]||m[d]||r;return n?a.createElement(h,i(i({ref:t},u),{},{components:n})):a.createElement(h,i({ref:t},u))}));function h(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=n.length,i=new Array(r);i[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[c]="string"==typeof e?e:s,i[1]=o;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},34457:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var a=n(87462),s=(n(67294),n(3905));const r={id:"Use Cases",title:"Use Cases",description:"",sidebar_position:5},i=void 0,o={unversionedId:"kits/Business Partner Kit/Software Development View/Use Cases",id:"kits/Business Partner Kit/Software Development View/Use Cases",title:"Use Cases",description:"",source:"@site/docs-kits/kits/Business Partner Kit/Software Development View/page_use-cases.md",sourceDirName:"kits/Business Partner Kit/Software Development View",slug:"/kits/Business Partner Kit/Software Development View/Use Cases",permalink:"/docs-kits/next/kits/Business Partner Kit/Software Development View/Use Cases",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"Use Cases",title:"Use Cases",description:"",sidebar_position:5},sidebar:"kits",previous:{title:"Specification",permalink:"/docs-kits/next/kits/Business Partner Kit/Software Development View/Specification"},next:{title:"Operation View",permalink:"/docs-kits/next/kits/Business Partner Kit/Operation View"}},l={},p=[{value:"1 - Execute automated end to end test",id:"1---execute-automated-end-to-end-test",level:2},{value:"Local environment setup",id:"local-environment-setup",level:3},{value:"Prerequisites",id:"prerequisites",level:4},{value:"Installation Steps",id:"installation-steps",level:4},{value:"1.1 Start BPDM Api Services",id:"11-start-bpdm-api-services",level:5},{value:"Start Automated E2E Test",id:"start-automated-e2e-test",level:3},{value:"2 - Request Business Partner Changelogs",id:"2---request-business-partner-changelogs",level:2},{value:"Input Changelogs",id:"input-changelogs",level:3},{value:"Output Changelogs",id:"output-changelogs",level:3}],u={toc:p};function c(e){let{components:t,...n}=e;return(0,s.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"Here in this section, we have provided use cases along with how end to end tests can be performed on local machine."),(0,s.kt)("h2",{id:"1---execute-automated-end-to-end-test"},"1 - Execute automated end to end test"),(0,s.kt)("p",null,"To perform end-to-end test of all Business Partner Data Management (BPDM) services using the ",(0,s.kt)("inlineCode",{parentName:"p"},"bpdm-system-tester")," module, follow the detailed steps below.\nThis guide will help you set up your local environment, configure necessary services, and execute tests to ensure the BPDM services function as expected."),(0,s.kt)("h3",{id:"local-environment-setup"},"Local environment setup"),(0,s.kt)("p",null,"To run BPDM services and tester module, BPDM offers multiple ways like using Helm Charts or using Dockerfiles depending upon different scenarios.\nFor more details on how can you run services on different environment, you can follow instructions mentioned in ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/eclipse-tractusx/bpdm/blob/main/INSTALL.md"},"INSTALL.md")," file."),(0,s.kt)("h4",{id:"prerequisites"},"Prerequisites"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"JAVA 21"),(0,s.kt)("li",{parentName:"ul"},"Maven (3.9 supported)"),(0,s.kt)("li",{parentName:"ul"},"Docker Engine"),(0,s.kt)("li",{parentName:"ul"},"Docker Compose")),(0,s.kt)("h4",{id:"installation-steps"},"Installation Steps"),(0,s.kt)("h5",{id:"11-start-bpdm-api-services"},"1.1 Start BPDM Api Services"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Clone the repository:"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Go to the following GitHub repository: ",(0,s.kt)("a",{parentName:"li",href:"https://github.com/eclipse-tractusx/bpdm"},"https://github.com/eclipse-tractusx/bpdm")),(0,s.kt)("li",{parentName:"ul"},"Clone the repository to your local system using Git. You can use the following command:")),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/eclipse-tractusx/bpdm\n")),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"Choose an IDE: You can use any IDE of your preference to view the code. One recommended IDE is IntelliJ IDEA as application is based on Kotlin springBoot framework."))),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Configure local service:"),(0,s.kt)("p",{parentName:"li"},"On default, the BPDM Gate supports a simple multi-tenancy feature. Each company, identified by the BPNL of the accessing user, has a separate tenant of business partner data in one Gate."),(0,s.kt)("p",{parentName:"li"},"Alternatively, a BPDM Gate can be configured to be single tenant only. This allows access for users only from a single company identified by its BPNL."),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"bpdm:\n    bpn:\n        owner-bpn-l: BPNLXXXXXXXXXX01\n")),(0,s.kt)("p",{parentName:"li"},"If it is set with a BPNL only users belonging to that company can access the Gate. If it is not set or set to null a user from any company can use the Gate, albeit the user can only see its own company shared business partner data.")),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Start BPDM services sequentially:"),(0,s.kt)("p",{parentName:"li"},"BPDM services require a PostgreSQL database and Keycloak server to run. Navigate to the root folder of the BPDM repository. Then set up the necessary dependencies by using the provided Docker Compose file:"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"docker compose -f docker/compose/dependencies/docker-compose.yml up -d\n")),(0,s.kt)("p",{parentName:"li"},"This will run a Postgres and Keycloak with an initial realm already configured to be used by the BPDM services. After this step, we can build and install the BPDM applications."),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"mvn clean install\n")),(0,s.kt)("p",{parentName:"li"},"Each BPDM application can now be run separately. We will run each application after another. For this, we navigate into the application's subfolder and run the application with the spring-boot run goal."),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"cd bpdm-orchestrator\nmvn spring-boot:run\ncd ../bpdm-cleaning-service-dummy\nmvn spring-boot:run\ncd ../bpdm-pool\nmvn spring-boot:run\ncd ../bpdm-gate\nmvn spring-boot:run\n")))),(0,s.kt)("h3",{id:"start-automated-e2e-test"},"Start Automated E2E Test"),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"bpdm-system-tester")," module is responsible for performing automated end to end test. To get more details about test data and scenarios which are running under automated test,\nyou can visit ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/eclipse-tractusx/bpdm/tree/main/bpdm-system-tester/src/main/resources/cucumber"},"feature")," file folder."),(0,s.kt)("p",null,"now you can run the ",(0,s.kt)("inlineCode",{parentName:"p"},"bpdm-system-tester")," application with the spring-boot run goal."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"cd bpdm-system-tester\nmvn spring-boot:run\n")),(0,s.kt)("p",null,"This will execute all the test scenarios parallelly and will be finished in 3-4 minutes of time."),(0,s.kt)("h2",{id:"2---request-business-partner-changelogs"},"2 - Request Business Partner Changelogs"),(0,s.kt)("p",null,"Similarly based on use case 1, if you have executed automated end to end test successfully on your local machine then you can easily search for intput and output changelogs of involved business partners during tests."),(0,s.kt)("p",null,"example, you can have below request from BPDM-GATE service after execution of automated tests"),(0,s.kt)("h3",{id:"input-changelogs"},"Input Changelogs"),(0,s.kt)("p",null,"Request -"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl --location 'http://localhost:8081/v6/input/changelog/search?page=0&size=5' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: \u2022\u2022\u2022\u2022\u2022\u2022' \\\n--data '{\n  \"timestampAfter\": \"2023-03-20T10:23:28.194Z\",\n  \"externalIds\": [\n  ]\n}'\n")),(0,s.kt)("p",null,"Response - will be something like below."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},'{\n    "totalElements": 28,\n    "totalPages": 6,\n    "page": 0,\n    "contentSize": 5,\n    "content": [\n        {\n            "externalId": "CC_SHG_WATT_4_2025-02-05T07:39:31.981320Z",\n            "timestamp": "2025-02-05T07:39:33.607852Z",\n            "changelogType": "CREATE"\n        },\n        {\n            "externalId": "CC_SHG_WATT_5_2025-02-05T07:39:31.981320Z",\n            "timestamp": "2025-02-05T07:39:33.607866Z",\n            "changelogType": "CREATE"\n        },\n        {\n            "externalId": "CC_SHG_WAT_1_2025-02-05T07:39:31.981320Z",\n            "timestamp": "2025-02-05T07:39:33.607866Z",\n            "changelogType": "CREATE"\n        },\n        {\n            "externalId": "CC_SHG_WATT_7_2025-02-05T07:39:31.981320Z",\n            "timestamp": "2025-02-05T07:39:33.607852Z",\n            "changelogType": "CREATE"\n        },\n        {\n            "externalId": "CC_SHG_WAT_2_2025-02-05T07:39:31.981320Z",\n            "timestamp": "2025-02-05T07:39:33.607866Z",\n            "changelogType": "CREATE"\n        }\n    ],\n    "invalidEntries": 0,\n    "errors": []\n}\n')),(0,s.kt)("h3",{id:"output-changelogs"},"Output Changelogs"),(0,s.kt)("p",null,"Request -"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"curl --location 'http://localhost:8081/v6/output/changelog/search?page=0&size=3' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: \u2022\u2022\u2022\u2022\u2022\u2022' \\\n--data '{\n  \"timestampAfter\": \"2023-03-20T10:23:28.194Z\",\n  \"externalIds\": [\n    \n  ]\n}'\n")),(0,s.kt)("p",null,"Response - will be something like below."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},'{\n    "totalElements": 14,\n    "totalPages": 5,\n    "page": 0,\n    "contentSize": 3,\n    "content": [\n        {\n            "externalId": "CC_SHG_WAT_0_2025-02-05T07:39:31.981320Z",\n            "timestamp": "2025-02-05T07:41:30.715125Z",\n            "changelogType": "CREATE"\n        },\n        {\n            "externalId": "CC_SHG_WAT_2_2025-02-05T07:39:31.981320Z",\n            "timestamp": "2025-02-05T07:41:30.718923Z",\n            "changelogType": "CREATE"\n        },\n        {\n            "externalId": "CC_SHG_WAT_1_2025-02-05T07:39:31.981320Z",\n            "timestamp": "2025-02-05T07:41:30.722869Z",\n            "changelogType": "CREATE"\n        }\n    ],\n    "invalidEntries": 0,\n    "errors": []\n}\n')))}c.isMDXComponent=!0}}]);