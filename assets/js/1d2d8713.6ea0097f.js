"use strict";(self.webpackChunkeclipse_tractusx_github_io=self.webpackChunkeclipse_tractusx_github_io||[]).push([[65961],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>g});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=a.createContext({}),l=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},c=function(e){var n=l(e.components);return a.createElement(p.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=l(t),m=r,g=d["".concat(p,".").concat(m)]||d[m]||u[m]||o;return t?a.createElement(g,s(s({ref:n},c),{},{components:t})):a.createElement(g,s({ref:n},c))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,s=new Array(o);s[0]=m;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i[d]="string"==typeof e?e:r,s[1]=i;for(var l=2;l<o;l++)s[l]=t[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},55846:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var a=t(87462),r=(t(67294),t(3905));const o={sidebar_position:1,title:"Deployment"},s=void 0,i={unversionedId:"kits/knowledge-agents/operation-view/deployment",id:"kits/knowledge-agents/operation-view/deployment",title:"Deployment",description:"\x3c!--",source:"@site/docs-kits/kits/knowledge-agents/operation-view/deployment.md",sourceDirName:"kits/knowledge-agents/operation-view",slug:"/kits/knowledge-agents/operation-view/deployment",permalink:"/docs-kits/next/kits/knowledge-agents/operation-view/deployment",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Deployment"},sidebar:"kits",previous:{title:"Deletes a Graph (Asset)",permalink:"/docs-kits/next/kits/knowledge-agents/development-view/api/graph/graph-delete"},next:{title:"Agent-Enabled Dataspace Connector",permalink:"/docs-kits/next/kits/knowledge-agents/operation-view/agent_edc"}},p={},l=[{value:"Agents KIT",id:"agents-kit",level:2},{value:"Motivation &amp; Deployment Roles",id:"motivation--deployment-roles",level:2},{value:"Role: As A Consumer",id:"role-as-a-consumer",level:2},{value:"Role: As A Skill Provider",id:"role-as-a-skill-provider",level:2},{value:"Role: As A (Data/Function) Provider",id:"role-as-a-datafunction-provider",level:2},{value:"Sub-Role: As A Data Provider",id:"sub-role-as-a-data-provider",level:3},{value:"Sub-Role: As A Function Provider",id:"sub-role-as-a-function-provider",level:3},{value:"Sub-Role: As A Twin Provider",id:"sub-role-as-a-twin-provider",level:3},{value:"Runbook For Deploying and Smoke-Testing Knowledge Agents (Stable)",id:"runbook-for-deploying-and-smoke-testing-knowledge-agents-stable",level:2},{value:"1. Prepare the Two Tenants",id:"1-prepare-the-two-tenants",level:3},{value:"2. Deploy Agent-Enabled Connector&#39;s",id:"2-deploy-agent-enabled-connectors",level:3},{value:"App Provider 1 Dataspace Connector Manifest",id:"app-provider-1-dataspace-connector-manifest",level:4},{value:"App Provider 1 Agent Plane Manifest",id:"app-provider-1-agent-plane-manifest",level:4},{value:"App Consumer 4 Datspace Connector Manifest",id:"app-consumer-4-datspace-connector-manifest",level:4},{value:"App Consumer 4 Agent Plane Manifest",id:"app-consumer-4-agent-plane-manifest",level:4},{value:"3. Deploy Matchmaking Agent",id:"3-deploy-matchmaking-agent",level:3},{value:"App Consumer 4 Matchmaking Agent Manifest",id:"app-consumer-4-matchmaking-agent-manifest",level:4},{value:"4. Deploy App Provider 1 Provisioning Agent",id:"4-deploy-app-provider-1-provisioning-agent",level:3},{value:"5. Deploy App Provider 1 Remoting Agent",id:"5-deploy-app-provider-1-remoting-agent",level:3},{value:"6. Deploy App Provider 1 AAS Bridge",id:"6-deploy-app-provider-1-aas-bridge",level:3},{value:"5. Perform Smoke Tests",id:"5-perform-smoke-tests",level:3}],c={toc:l};function d(e){let{components:n,...o}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,o,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Agents Kit Banner",src:t(3389).Z,width:"286",height:"244"})),(0,r.kt)("h2",{id:"agents-kit"},"Agents KIT"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Operating federated queries over the whole data space.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Our ",(0,r.kt)("a",{parentName:"li",href:"../adoption-view/intro"},"Adoption")," guideline"),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("a",{parentName:"li",href:"../development-view/architecture"},"Architecture")," documentation"),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("a",{parentName:"li",href:"agent_edc"},"EDC Deployment")," description"),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("a",{parentName:"li",href:"provider"},"(Data/Function) Provider Deployment")," description"),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("a",{parentName:"li",href:"bridge"},"AAS Bridge Deployment")," description"),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("a",{parentName:"li",href:"testbed"},"Conformity")," testbed"),(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("a",{parentName:"li",href:"policy"},"Data Sovereignity & Graph Policy")," discussion")),(0,r.kt)("h2",{id:"motivation--deployment-roles"},"Motivation & Deployment Roles"),(0,r.kt)("p",null,"Knowledge Agents is a federated technology, so there is no central component setup to take into account.\nInstead, the Semantic Dataspace is formed by the individual business partners extending/configuring their\nconnectors and enabling their backend systems and/or datalakes. The deployment depends hereby on the\nrole that the business partner takes. The roles are described in more detail in our ",(0,r.kt)("a",{parentName:"p",href:"../adoption-view/intro"},"Adoption")," guideline."),(0,r.kt)("p",null,(0,r.kt)("a",{target:"_blank",href:t(79294).Z},(0,r.kt)("img",{alt:"Dataspace Roles",src:t(47682).Z,width:"290",height:"400"}))),(0,r.kt)("h2",{id:"role-as-a-consumer"},"Role: As A Consumer"),(0,r.kt)("p",null,"As a consumer, you just need to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"enable your ",(0,r.kt)("a",{parentName:"li",href:"agent_edc"},"dataspace connector")," to initiate/delegate the required Agent protocols (here: SparQL-over-Http)."),(0,r.kt)("li",{parentName:"ul"},"(optionally) use a separate matchmaking agent to securely host your own business and meta data in the graph storage behind the connector layer"),(0,r.kt)("li",{parentName:"ul"},"(optionally) mount your matchmaking agent as a remote repository into your enterprise graph infrastructure.")),(0,r.kt)("h2",{id:"role-as-a-skill-provider"},"Role: As A Skill Provider"),(0,r.kt)("p",null,"As a skill provider, you need to"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"enable your ",(0,r.kt)("a",{parentName:"li",href:"agent_edc"},"dataspace connector"),"  to transfer/delegate the required Agent protocols."),(0,r.kt)("li",{parentName:"ul"},"(optionally) employ multiple data planes in case you want to expose hosted skills (skill assets that operate as stored procedures\nand which require computational resources at the provider side) instead of distributed skills (skill assets that are offered as query texts/files and which are executed at the consumer side).")),(0,r.kt)("h2",{id:"role-as-a-datafunction-provider"},"Role: As A (Data/Function) Provider"),(0,r.kt)("p",null,"As a provider, you need to"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"enable your ",(0,r.kt)("a",{parentName:"li",href:"agent_edc"},"dataspace connector")," to receive/internalize the required Agent protocols."),(0,r.kt)("li",{parentName:"ul"},"(optionally) use a separate matchmaking agent to securely publish your own business and meta data from the graph storage behind the connector layer")),(0,r.kt)("p",null,'Depending on the kind of provisioning, you will setup additional internal "agents" (endpoints).'),(0,r.kt)("h3",{id:"sub-role-as-a-data-provider"},"Sub-Role: As A Data Provider"),(0,r.kt)("p",null,"As a data provider, you want to"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"provider"},"bind")," your data sources to knowledge graphs following the Catena-X ontology. Therefore, a provisioning agent\nshould be setup on top of a data virtualization/database layer.")),(0,r.kt)("h3",{id:"sub-role-as-a-function-provider"},"Sub-Role: As A Function Provider"),(0,r.kt)("p",null,"As a function provider, you want to"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"provider"},"bind")," your API to a special knowledge graph structure. Therefore, a remoting agent should be setup.")),(0,r.kt)("h3",{id:"sub-role-as-a-twin-provider"},"Sub-Role: As A Twin Provider"),(0,r.kt)("p",null,"As a twin provider, you want to"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"bridge"},"bridge")," between the Knowledge Agent and Asset Administration Shell APIs.")),(0,r.kt)("h2",{id:"runbook-for-deploying-and-smoke-testing-knowledge-agents-stable"},"Runbook For Deploying and Smoke-Testing Knowledge Agents (Stable)"),(0,r.kt)("p",null,"The Stable Environment is a minimal example environment exhibiting all roles and capabilities of the Tractus-X/Catena-X dataspace."),(0,r.kt)("p",null,"Knowledge Agents on Stable is deployed on the following two tenants"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"App Provider 1 (BPNL000000000001)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'Dataspace Connector (Postgresl, Hashicorp-Vault) "provider-connector" see ',(0,r.kt)("a",{parentName:"li",href:"#app-provider-1-dataspace-connector-manifest"},"manifest")),(0,r.kt)("li",{parentName:"ul"},'Agent-Plane (Postgresql, Hashicorp-Vault) "provider-agent-plane" see ',(0,r.kt)("a",{parentName:"li",href:"#app-provider-1-agent-plane-manifest"},"manifest")),(0,r.kt)("li",{parentName:"ul"},'Provisioning Agent incl. Local Database "sql-agent" see ',(0,r.kt)("a",{parentName:"li",href:"#4-deploy-app-provider-1-provisioning-agent"},"manifest")),(0,r.kt)("li",{parentName:"ul"},'Remoting Agent (against a Public WebService) "api-agent" see ',(0,r.kt)("a",{parentName:"li",href:"#5-deploy-app-provider-1-remoting-agent"},"manifest")),(0,r.kt)("li",{parentName:"ul"},'AAS Bridge (against a prerecorded )"aas-bridge" see ',(0,r.kt)("a",{parentName:"li",href:"#6-deploy-app-provider-1-aas-bridge"},"manifest")))),(0,r.kt)("li",{parentName:"ul"},"App Consumer 4 (BPNL0000000005VV)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},'Dataspace Connector (Postgresl, Hashicorp-Vault) "consumer-connector" see ',(0,r.kt)("a",{parentName:"li",href:"#app-consumer-4-datspace-connector-manifest"},"manifest")),(0,r.kt)("li",{parentName:"ul"},'Agent-Plane (Postgresql, Hashicorp-Vault) "consumer-agent-plane" see ',(0,r.kt)("a",{parentName:"li",href:"#app-consumer-4-agent-plane-manifest"},"manifest")),(0,r.kt)("li",{parentName:"ul"},'Matchmaking-Agent "consumer-agent" see ',(0,r.kt)("a",{parentName:"li",href:"#app-consumer-4-matchmaking-agent-manifest"},"manifest"))))),(0,r.kt)("h3",{id:"1-prepare-the-two-tenants"},"1. Prepare the Two Tenants"),(0,r.kt)("p",null,"As a first step, two technical users are installed for the dataspace connectors using the ",(0,r.kt)("a",{parentName:"p",href:"https://portal.stable.demo.catena-x.net"},"https://portal.stable.demo.catena-x.net")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"App Provider 1: sa4"),(0,r.kt)("li",{parentName:"ul"},"App Consumer 4: sa5")),(0,r.kt)("p",null,"The generated secrets should be installed under ",(0,r.kt)("a",{parentName:"p",href:"https://vault.demo.catena-x.net/ui/vault/secrets/knowledge"},"https://vault.demo.catena-x.net/ui/vault/secrets/knowledge")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"stable-provider-dim"),(0,r.kt)("li",{parentName:"ul"},"stable-consumer-dim")),(0,r.kt)("p",null,"Further secrets should be installed"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"oem-cert"),(0,r.kt)("li",{parentName:"ul"},"oem-key"),(0,r.kt)("li",{parentName:"ul"},"oem-symmetric-key"),(0,r.kt)("li",{parentName:"ul"},"consumer-cert"),(0,r.kt)("li",{parentName:"ul"},"consumer-key"),(0,r.kt)("li",{parentName:"ul"},"consumer-symmetric-key")),(0,r.kt)("p",null,"Finally, an access token to the vault has been generated."),(0,r.kt)("h3",{id:"2-deploy-agent-enabled-connectors"},"2. Deploy Agent-Enabled Connector's"),(0,r.kt)("p",null,"Using ",(0,r.kt)("a",{parentName:"p",href:"https://argo.stable.demo.catena-x.net/settings/projects/project-knowledge"},"https://argo.stable.demo.catena-x.net/settings/projects/project-knowledge")," the following three applications have been installed."),(0,r.kt)("p",null,"We give the complete manifests but hide the secrets."),(0,r.kt)("h4",{id:"app-provider-1-dataspace-connector-manifest"},"App Provider 1 Dataspace Connector Manifest"),(0,r.kt)("p",null,'Deployed as "provider-connector"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'project: project-knowledge\nsource:\n  repoURL: \'https://eclipse-tractusx.github.io/charts/dev\'\n  targetRevision: 0.7.3\n  plugin:\n    env:\n      - name: HELM_VALUES\n        value: |\n          participant:\n            id: BPNL000000000001\n          nameOverride: agent-connector-provider\n          fullnameOverride: agent-connector-provider\n          vault:\n            hashicorp:\n              enabled: true\n              url: https://vault.demo.catena-x.net\n              token: ****\n              healthCheck:\n                enabled: false\n                standbyOk: true\n              paths:\n                secret: /v1/knowledge\n            secretNames:\n              transferProxyTokenSignerPrivateKey: oem-key\n              transferProxyTokenSignerPublicKey: oem-cert\n              transferProxyTokenEncryptionAesKey: oem-symmetric-key\n          iatp:\n              id: did:web:portal-backend.stable.demo.catena-x.net:api:administration:staticdata:did:BPNL000000000001\n              trustedIssuers:\n              - did:web:dim-static-prod.dis-cloud-prod.cfapps.eu10-004.hana.ondemand.com:dim-hosted:2f45795c-d6cc-4038-96c9-63cedc0cd266:holder-iatp\n              sts:\n              dim:\n                url: https://dis-integration-service-prod.eu10.dim.cloud.sap/api/v2.0.0/iatp/catena-x-portal\n              oauth:\n                token_url: https://bpnl000000000001-authentication.eu10.hana.ondemand.com/oauth/token\n                client:\n                  id: sa4\n                  secret_alias: stable-provider-dim\n          postgresql:\n              name: agent-postgresql\n              jdbcUrl: jdbc:postgresql://agent-postgresql:5432/provider\n              auth:\n                 database: provider\n                 username: provider_user\n                 password: ****\n          controlplane:\n            securityContext:\n              readOnlyRootFilesystem: false\n            image:\n              pullPolicy: Always\n            endpoints:\n              management:\n                control:\n                  port: 8083\n                  path: "/control"\n                protocol:\n                  port: 8084\n                  path: "/api/v1/dsp"\n                management:\n                  port: 8081\n                  path: "/management"\n                  authKey: ***\n            bdrs:\n              server:\n                url: https://bpn-did-resolution-service.int.demo.catena-x.net/api/directory\n            ingresses:\n              - enabled: true\n                # -- The hostname to be used to precisely map incoming traffic onto the underlying network service\n                hostname: "agent-provider-cp.stable.demo.catena-x.net"\n                # -- EDC endpoints exposed by this ingress resource\n                endpoints:\n                  - protocol\n                  - management\n                  - api\n                # -- Enables TLS on the ingress resource\n                tls:\n                  enabled: true\n          dataplane:\n            token:\n              signer:\n                privatekey_alias: consumer-key\n              verifier:\n                publickey_alias: consumer-cert\n  chart: tractusx-connector\ndestination:\n  server: \'https://kubernetes.default.svc\'\n  namespace: product-knowledge\n')),(0,r.kt)("h4",{id:"app-provider-1-agent-plane-manifest"},"App Provider 1 Agent Plane Manifest"),(0,r.kt)("p",null,'Deployed as "provider-agent-plane"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'project: project-knowledge\nsource:\n  repoURL: \'https://eclipse-tractusx.github.io/charts/dev\'\n  targetRevision: 1.13.22\n  plugin:\n    env:\n      - name: HELM_VALUES\n        value: |\n          participant:\n            id: BPNL000000000001\n          nameOverride: agent-plane-provider\n          fullnameOverride: agent-plane-provider\n          vault:\n            hashicorp:\n              enabled: true\n              url: https://vault.demo.catena-x.net\n              token: ****\n              healthCheck:\n                enabled: false\n                standbyOk: true\n              paths:\n                secret: /v1/knowledge\n            secretNames:\n              transferProxyTokenSignerPrivateKey: oem-key\n              transferProxyTokenSignerPublicKey: oem-cert\n              transferProxyTokenEncryptionAesKey: oem-symmetric-key\n          iatp:\n              id: did:web:portal-backend.stable.demo.catena-x.net:api:administration:staticdata:did:BPNL000000000001\n              trustedIssuers:\n              - did:web:dim-static-prod.dis-cloud-prod.cfapps.eu10-004.hana.ondemand.com:dim-hosted:2f45795c-d6cc-4038-96c9-63cedc0cd266:holder-iatp\n              sts:\n                dim:\n                  url: https://dis-integration-service-prod.eu10.dim.cloud.sap/api/v2.0.0/iatp/catena-x-portal\n                oauth:\n                  token_url: https://bpnl000000000001-authentication.eu10.hana.ondemand.com/oauth/token\n                  client:\n                    id: sa4\n                    secret_alias: stable-provider-dim\n          postgresql:\n              name: agent-postgresql\n              jdbcUrl: jdbc:postgresql://agent-postgresql:5432/provider\n              auth:\n                 database: provider\n                 username: provider_user\n                 password: ****\n          connector: provider-connector\n          controlplane:\n            endpoints:\n              control:\n                port: 8083\n                path: "/control"\n              protocol:\n                port: 8084\n                path: "/api/v1/dsp"\n              management:\n                port: 8081\n                path: "/management"\n                authKey: ***\n            bdrs:\n              server:\n                url: https://bpn-did-resolution-service.int.demo.catena-x.net/api/directory\n            ingresses:\n              - enabled: true\n                # -- The hostname to be used to precisely map incoming traffic onto the underlying network service\n                hostname: "agent-provider-cp.stable.demo.catena-x.net"\n                # -- EDC endpoints exposed by this ingress resource\n                endpoints:\n                  - protocol\n                  - management\n                  - api\n                # -- Enables TLS on the ingress resource\n                tls:\n                  enabled: true\n          token:\n            signer:\n              privatekey_alias: oem-key\n            verifier:\n              publickey_alias: oem-cert\n          auth: {}\n          ingresses:\n           - enabled: true\n             hostname: "provider-agent.stable.demo.catena-x.net"\n             endpoints:\n              - public\n              - default\n             tls:\n               enabled: true\n          configs:\n            dataspace.ttl: |-\n              #################################################################\n              # Catena-X Agent Bootstrap Graph in TTL/RDF/OWL FORMAT\n              #################################################################\n              @prefix : <GraphAsset?local=Dataspace> .\n              @prefix cx-common: <https://w3id.org/catenax/ontology/common#> .\n              @prefix owl: <http://www.w3.org/2002/07/owl#> .\n              @prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n              @prefix xml: <http://www.w3.org/XML/1998/namespace> .\n              @prefix json: <https://json-schema.org/draft/2020-12/schema#> .\n              @prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n              @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\n              @prefix bpnl: <bpn:legal:> .\n              @prefix bpns: <bpn:site:> .\n              @base <GraphAsset?local=Dataspace> .\n              \n              bpnl:BPNL000000000001 cx-common:id "BPNL000000000001"^^xsd:string;\n                              cx-common:hasConnector <edcs://agent-provider-cp.stable.demo.catena-x.ne>.\n\n              bpnl:BPNL0000000005VV cx-common:id  "BPNL0000000005VV"^^xsd:string;\n                              cx-common:hasConnector <edcs://agent-consumer-cp.stable.demo.catena-x.net>.\n          agent:\n            synchronization: 360000\n            connectors: \n              BPNL000000000001: https://agent-provider-cp.stable.demo-catena-x.net\n  chart: agent-plane\ndestination:\n  server: \'https://kubernetes.default.svc\'\n  namespace: product-knowledge\n')),(0,r.kt)("h4",{id:"app-consumer-4-datspace-connector-manifest"},"App Consumer 4 Datspace Connector Manifest"),(0,r.kt)("p",null,'Deployed as "consumer-connector"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'project: project-knowledge\nsource:\n  repoURL: \'https://eclipse-tractusx.github.io/charts/dev\'\n  targetRevision: 0.7.3\n  plugin:\n    env:\n      - name: HELM_VALUES\n        value: |\n          participant:\n            id: BPNL0000000005VV\n          nameOverride: agent-connector-consumer\n          fullnameOverride: agent-connector-consumer\n          vault:\n            hashicorp:\n              enabled: true\n              url: https://vault.demo.catena-x.net\n              token: ****\n              healthCheck:\n                enabled: false\n                standbyOk: true\n              paths:\n                secret: /v1/knowledge\n            secretNames:\n              transferProxyTokenSignerPrivateKey: consumer-key\n              transferProxyTokenSignerPublicKey: consumer-cert\n              transferProxyTokenEncryptionAesKey: consumer-symmetric-key\n          iatp:\n              id: did:web:portal-backend.stable.demo.catena-x.net:api:administration:staticdata:did:BPNL0000000005VV\n              trustedIssuers:\n              - did:web:dim-static-prod.dis-cloud-prod.cfapps.eu10-004.hana.ondemand.com:dim-hosted:2f45795c-d6cc-4038-96c9-63cedc0cd266:holder-iatp\n              sts:\n              dim:\n                url: https://dis-integration-service-prod.eu10.dim.cloud.sap/api/v2.0.0/iatp/catena-x-portal\n              oauth:\n                token_url: https://bpnl0000000005VV-authentication.eu10.hana.ondemand.com/oauth/token\n                client:\n                  id: sa5\n                  secret_alias: stable-consumer-dim\n          postgresql:\n              name: agent-postgresql2\n              jdbcUrl: jdbc:postgresql://agent-postgresql2:5432/consumer\n              auth:\n                 database: consumer\n                 username: consumer_user\n                 password: ****\n          controlplane:\n            securityContext:\n              readOnlyRootFilesystem: false\n            image:\n              pullPolicy: Always\n            endpoints:\n              control:\n                port: 8083\n                path: "/control"\n              protocol:\n                port: 8084\n                path: "/api/v1/dsp"\n              management:\n                port: 8081\n                path: "/management"\n                authKey: ***\n            bdrs:\n              server:\n                url: https://bpn-did-resolution-service.int.demo.catena-x.net/api/directory\n            ingresses:\n              - enabled: true\n                # -- The hostname to be used to precisely map incoming traffic onto the underlying network service\n                hostname: "agent-consumer-cp.stable.demo.catena-x.net"\n                # -- EDC endpoints exposed by this ingress resource\n                endpoints:\n                  - protocol\n                  - management\n                  - api\n                # -- Enables TLS on the ingress resource\n                tls:\n                  enabled: true\n          dataplane:\n            token:\n              signer:\n                privatekey_alias: consumer-key\n              verifier:\n                publickey_alias: consumer-cert\n  chart: tractusx-connector\ndestination:\n  server: \'https://kubernetes.default.svc\'\n  namespace: product-knowledge\n')),(0,r.kt)("h4",{id:"app-consumer-4-agent-plane-manifest"},"App Consumer 4 Agent Plane Manifest"),(0,r.kt)("p",null,'Deployed as "consumer-agent-plane"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'project: project-knowledge\nsource:\n  repoURL: \'https://eclipse-tractusx.github.io/charts/dev\'\n  targetRevision: 1.13.22\n  plugin:\n    env:\n      - name: HELM_VALUES\n        value: |\n          participant:\n            id: BPNL0000000005VV\n          nameOverride: agent-plane-consumer\n          fullnameOverride: agent-plane-consumer\n          vault:\n            hashicorp:\n              enabled: true\n              url: https://vault.demo.catena-x.net\n              token: ****\n              healthCheck:\n                enabled: false\n                standbyOk: true\n              paths:\n                secret: /v1/knowledge\n            secretNames:\n              transferProxyTokenSignerPrivateKey: consumer-key\n              transferProxyTokenSignerPublicKey: consumer-cert\n              transferProxyTokenEncryptionAesKey: consumer-symmetric-key\n          iatp:\n              id: did:web:portal-backend.stable.demo.catena-x.net:api:administration:staticdata:did:BPNL0000000005VV\n              trustedIssuers:\n              - did:web:dim-static-prod.dis-cloud-prod.cfapps.eu10-004.hana.ondemand.com:dim-hosted:2f45795c-d6cc-4038-96c9-63cedc0cd266:holder-iatp\n              sts:\n              dim:\n                url: https://dis-integration-service-prod.eu10.dim.cloud.sap/api/v2.0.0/iatp/catena-x-portal\n              oauth:\n                token_url: https://bpnl0000000005VV-authentication.eu10.hana.ondemand.com/oauth/token\n                client:\n                  id: sa5\n                  secret_alias: stable-consumer-dim\n          postgresql:\n              name: agent-postgresql2\n              jdbcUrl: jdbc:postgresql://agent-postgresql2:5432/consumer\n              auth:\n                 database: consumer\n                 username: consumer_user\n                 password: ****\n          connector: consumer-connector\n          controlplane:\n            endpoints:\n              management:\n                control:\n                  port: 8083\n                  path: "/control"\n                protocol:\n                  port: 8084\n                  path: "/api/v1/dsp"\n                management:\n                  port: 8081\n                  path: "/management"\n                  authKey: ***\n            bdrs:\n              server:\n                url: https://bpn-did-resolution-service.int.demo.catena-x.net/api/directory\n            ingresses:\n              - enabled: true\n                # -- The hostname to be used to precisely map incoming traffic onto the underlying network service\n                hostname: "agent-consumer-cp.stable.demo.catena-x.net"\n                # -- EDC endpoints exposed by this ingress resource\n                endpoints:\n                  - protocol\n                  - management\n                  - api\n                # -- Enables TLS on the ingress resource\n                tls:\n                  enabled: true\n          token:\n            signer:\n              privatekey_alias: consumer-key\n            verifier:\n              publickey_alias: consumer-cert\n          auth: {}\n          ingresses:\n           - enabled: true\n             hostname: "agent-consumer-dp.stable.demo.catena-x.net"\n             endpoints:\n              - public\n              - default\n             tls:\n               enabled: true\n          configs:\n            dataspace.ttl: |-\n              #################################################################\n              # Catena-X Agent Bootstrap Graph in TTL/RDF/OWL FORMAT\n              #################################################################\n              @prefix : <GraphAsset?local=Dataspace> .\n              @prefix cx-common: <https://w3id.org/catenax/ontology/common#> .\n              @prefix owl: <http://www.w3.org/2002/07/owl#> .\n              @prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n              @prefix xml: <http://www.w3.org/XML/1998/namespace> .\n              @prefix json: <https://json-schema.org/draft/2020-12/schema#> .\n              @prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n              @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\n              @prefix bpnl: <bpn:legal:> .\n              @prefix bpns: <bpn:site:> .\n              @base <GraphAsset?local=Dataspace> .\n              \n              bpnl:BPNL000000000001 cx-common:id "BPNL000000000001"^^xsd:string;\n                              cx-common:hasConnector <edcs://agent-provider-cp.stable.demo.catena-x.ne>.\n\n              bpnl:BPNL0000000005VV cx-common:id  "BPNL0000000005VV"^^xsd:string;\n                              cx-common:hasConnector <edcs://agent-consumer-cp.stable.demo.catena-x.net>.\n          agent:\n            synchronization: 360000\n            connectors: \n              BPNL000000000001: https://agent-provider-cp.stable.demo-catena-x.net\n              BPNL0000000005VV: https://agent-consumer-cp.stable.demo-catena-x.net\n            matchmaking: https://consumer-agent.stable.demo-catena-x.net\n  chart: agent-plane\ndestination:\n  server: \'https://kubernetes.default.svc\'\n  namespace: product-knowledge\n')),(0,r.kt)("h3",{id:"3-deploy-matchmaking-agent"},"3. Deploy Matchmaking Agent"),(0,r.kt)("h4",{id:"app-consumer-4-matchmaking-agent-manifest"},"App Consumer 4 Matchmaking Agent Manifest"),(0,r.kt)("p",null,'Deployed as "consumer-agent"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'project: project-knowledge\nsource:\n  repoURL: \'https://eclipse-tractusx.github.io/charts/dev\'\n  targetRevision: 1.13.22\n  plugin:\n    env:\n      - name: HELM_VALUES\n        value: |\n          participant:\n            id: BPNL0000000005VV\n          nameOverride: agent-plane-consumer\n          fullnameOverride: agent-plane-consumer\n          connector: consumer-connector\n          controlplane:\n            endpoints:\n              management:\n                control:\n                  port: 8083\n                  path: "/control"\n                protocol:\n                  port: 8084\n                  path: "/api/v1/dsp"\n                management:\n                  port: 8081\n                  path: "/management"\n                  authKey: ***\n            bdrs:\n              server:\n                url: https://bpn-did-resolution-service.int.demo.catena-x.net/api/directory\n            ingresses:\n              - enabled: true\n                # -- The hostname to be used to precisely map incoming traffic onto the underlying network service\n                hostname: "agent-consumer-cp.stable.demo.catena-x.net"\n                # -- EDC endpoints exposed by this ingress resource\n                endpoints:\n                  - protocol\n                  - management\n                  - api\n                # -- Enables TLS on the ingress resource\n                tls:\n                  enabled: true\n          ingresses:\n          - enabled: true\n            hostname: "consumer-agent.stable.demo.catena-x.net"\n            endpoints:\n              - default\n            tls:\n              enabled: true\n            certManager:\n              clusterIssuer: *clusterIssuer\n          configs:\n            # -- An example of an empty graph in ttl syntax\n            dataspace.ttl: |\n              #################################################################\n              # Catena-X Agent Bootstrap Graph in TTL/RDF/OWL FORMAT\n              #################################################################\n              @prefix : <GraphAsset?local=Dataspace> .\n              @prefix cx-common: <https://w3id.org/catenax/ontology/common#> .\n              @prefix owl: <http://www.w3.org/2002/07/owl#> .\n              @prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\n              @prefix xml: <http://www.w3.org/XML/1998/namespace> .\n              @prefix json: <https://json-schema.org/draft/2020-12/schema#> .\n              @prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n              @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\n              @prefix bpnl: <bpn:legal:> .\n              @prefix bpns: <bpn:site:> .\n              @base <GraphAsset?local=Dataspace> .\n              \n              bpnl:BPNL000000000001 cx-common:id "BPNL000000000001"^^xsd:string;\n                              cx-common:hasConnector <edcs://agent-provider-cp.stable.demo.catena-x.ne>.\n\n              bpnl:BPNL0000000005VV cx-common:id  "BPNL0000000005VV"^^xsd:string;\n                              cx-common:hasConnector <edcs://agent-consumer-cp.stable.demo.catena-x.net>.\n          agent:\n            synchronization: 360000\n            connectors: \n              BPNL000000000001: https://agent-provider-cp.stable.demo-catena-x.net\n              BPNL0000000005VV: https://agent-consumer-cp.stable.demo-catena-x.net\n  chart: matchmaking-agent\ndestination:\n  server: \'https://kubernetes.default.svc\'\n  namespace: product-knowledge\n')),(0,r.kt)("h3",{id:"4-deploy-app-provider-1-provisioning-agent"},"4. Deploy App Provider 1 Provisioning Agent"),(0,r.kt)("p",null,"Using ",(0,r.kt)("a",{parentName:"p",href:"https://argo.stable.demo.catena-x.net/settings/projects/project-knowledge"},"https://argo.stable.demo.catena-x.net/settings/projects/project-knowledge")," the following application has been installed."),(0,r.kt)("p",null,"For simplicity, the provisioning agent exposes a builtin sample H2 database as a graph and therefore needs to write the file system with its non-root account.\nTherefore, some of the following settings are specific to stable and will not be used under productive settings."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'project: project-knowledge\nsource:\n  repoURL: \'https://eclipse-tractusx.github.io/charts/dev\'\n  targetRevision: 1.13.22\n  plugin:\n    env:\n      - name: HELM_VALUES\n        value: |\n          securityContext:\n            readOnlyRootFilesystem: false\n            runAsUser: 999\n            runAsGroup: 999\n            runAsUser: 999\n          podSecurityContext:\n            runAsGroup: 999\n            fsGroup: 999\n          bindings:\n            dtc:\n              port: 8080\n              settings:\n                  jdbc.url: "jdbc:h2:file:/opt/ontop/database/db;INIT=RUNSCRIPT FROM \'/opt/ontop/data/dtc.sql\'"\n                  jdbc.driver: "org.h2.Driver"\n                  ontop.cardinalityMode: "LOOSE"\n              mapping: |\n                [PrefixDeclaration]\n                cx-common:          https://w3id.org/catenax/ontology/common#\n                cx-core:            https://w3id.org/catenax/ontology/core#\n                cx-vehicle:         https://w3id.org/catenax/ontology/vehicle#\n                cx-reliability:     https://w3id.org/catenax/ontology/reliability#\n                uuid:               urn:uuid:\n                bpnl:               bpn:legal:\n                owl:                http://www.w3.org/2002/07/owl#\n                rdf:                http://www.w3.org/1999/02/22-rdf-syntax-ns#\n                xml:                http://www.w3.org/XML/1998/namespace\n                xsd:                http://www.w3.org/2001/XMLSchema#\n                json:               https://json-schema.org/draft/2020-12/schema#\n                obda:               https://w3id.org/obda/vocabulary#\n                rdfs:               http://www.w3.org/2000/01/rdf-schema#\n                oem:                urn:oem:\n\n                [MappingDeclaration] @collection [[\n                  mappingId dtc-meta\n                  target    bpnl:{bpnl} rdf:type cx-common:BusinessPartner ; cx-core:id {bpnl}^^xsd:string .\n                  source    SELECT distinct "bpnl" FROM "dtc"."meta"\n\n                  mappingId dtc-content\n                  target    oem:Analysis/{id} rdf:type cx-reliability:Analysis ; cx-core:id {code}^^xsd:string ; cx-core:name {description}^^xsd:string .\n                  source    SELECT * FROM "dtc"."content"\n\n                  mappingId dtc-part\n                  target    oem:Part/{entityGuid} rdf:type cx-vehicle:Part ; cx-core:id {enDenomination}^^xsd:string ; cx-core:name {classification}^^xsd:string .\n                  source    SELECT * FROM "dtc"."part"\n\n                  mappingId dtc-meta-part\n                  target    oem:Part/{entityGuid} cx-vehicle:manufacturer bpnl:{bpnl}.\n                  source    SELECT "bpnl","entityGuid" FROM "dtc"."part"\n\n                  mappingId dtc-part-content\n                  target    oem:Analysis/{dtc_id} cx-reliability:analysedObject oem:Part/{part_entityGuid}.\n                  source    SELECT "part_entityGuid","dtc_id" FROM "dtc"."content_part"\n\n                ]]\n  chart: provisioning-agent\ndestination:\n  server: \'https://kubernetes.default.svc\'\n  namespace: product-knowledge\n')),(0,r.kt)("h3",{id:"5-deploy-app-provider-1-remoting-agent"},"5. Deploy App Provider 1 Remoting Agent"),(0,r.kt)("p",null,"Using ",(0,r.kt)("a",{parentName:"p",href:"https://argo.stable.demo.catena-x.net/settings/projects/project-knowledge"},"https://argo.stable.demo.catena-x.net/settings/projects/project-knowledge")," the following application has been installed."),(0,r.kt)("p",null,"For simplicity, the remoting agent exposes a simply public API as a graph."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'project: project-knowledge\nsource:\n  repoURL: \'https://eclipse-tractusx.github.io/charts/dev\'\n  targetRevision: 1.13.22\n  plugin:\n    env:\n      - name: HELM_VALUES\n        value: |\n          image:\n            pullPolicy: Always\n          repositories:\n            prognosis: |\n              #\n              # Rdf4j configuration for prognosis remoting\n              #\n              @prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.\n              @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.\n              @prefix rep: <http://www.openrdf.org/config/repository#>.\n              @prefix sr: <http://www.openrdf.org/config/repository/sail#>.\n              @prefix sail: <http://www.openrdf.org/config/sail#>.\n              @prefix sp: <http://spinrdf.org/sp#>.\n              @prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\n              @prefix json: <https://json-schema.org/draft/2020-12/schema#> .\n              @prefix dcterms: <http://purl.org/dc/terms/> .\n              @prefix cx-fx: <https://w3id.org/catenax/ontology/function#>.\n              @prefix cx-common: <https://w3id.org/catenax/ontology/common#>.\n              @prefix cx-prognosis: <https://w3id.org/catenax/ontology/prognosis#>.\n              @prefix cx-rt: <https://w3id.org/catenax/ontology/remoting#>.\n\n              [] rdf:type rep:Repository ;\n                rep:repositoryID "prognosis" ;\n                rdfs:label "Prognosis Functions" ;\n                rep:repositoryImpl [\n                    rep:repositoryType "openrdf:SailRepository" ;\n                    sr:sailImpl [\n                      sail:sailType "org.eclipse.tractusx.agents:Remoting" ;\n                      cx-fx:callbackAddress <http://localhost:8888/callback>;\n                      cx-fx:supportsInvocation cx-prognosis:Prognosis;\n                    ]\n                ].\n\n              cx-prognosis:Prognosis rdf:type cx-fx:Function;\n                dcterms:description "Prognosis is a sample simulation function with input and output bindings."@en ;\n                dcterms:title "Prognosis" ;\n                cx-fx:targetUri "https://api.agify.io";\n                cx-fx:input cx-prognosis:name;\n                cx-fx:result cx-prognosis:hasResult.\n\n              cx-prognosis:hasResult rdf:type cx-fx:Result;\n                cx-fx:output cx-prognosis:prediction;\n                cx-fx:output cx-prognosis:support.\n\n              cx-prognosis:name rdf:type cx-fx:Argument;\n                dcterms:description "Name is an argument to the Prognosis function."@en ;\n                dcterms:title "Name";\n                cx-fx:argumentName "name".\n\n              cx-prognosis:prediction rdf:type cx-fx:ReturnValue;\n                dcterms:description "Prediction (Value) is an integer-based output of the Prognosis function."@en ;\n                dcterms:title "Prediction" ;\n                cx-fx:valuePath "age";\n                cx-fx:dataType xsd:int.\n\n              cx-prognosis:support rdf:type cx-fx:ReturnValue;\n                dcterms:description "Support (Value) is another integer-based output of the Prognosis function."@en ;\n                dcterms:title "Support" ;\n                cx-fx:valuePath "count";\n                cx-fx:dataType xsd:int.\n  chart: remoting-agent\ndestination:\n  server: \'https://kubernetes.default.svc\'\n  namespace: product-knowledge\n')),(0,r.kt)("h3",{id:"6-deploy-app-provider-1-aas-bridge"},"6. Deploy App Provider 1 AAS Bridge"),(0,r.kt)("p",null,"Using ",(0,r.kt)("a",{parentName:"p",href:"https://argo.stable.demo.catena-x.net/settings/projects/project-knowledge"},"https://argo.stable.demo.catena-x.net/settings/projects/project-knowledge")," the following application has been installed."),(0,r.kt)("p",null,"For simplicity, the aas bridge uses builtin-persistence."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'project: project-knowledge\nsource:\n  repoURL: \'https://eclipse-tractusx.github.io/charts/dev\'\n  targetRevision: 1.13.7\n  plugin:\n    env:\n      - name: HELM_VALUES\n        value: |\n          image:\n            pullPolicy: Always\n          aas:\n            persistence:\n              # -- The default sparql server is embedded\n              sparql: http://sparql.local\n            endpoints:\n              default:\n                path: "/"\n          ingresses:\n          - enabled: true\n            hostname: "aas-bridge.stable.demo.catena-x.net"\n            annotations:\n              nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"\n            endpoints:\n              - default\n            tls:\n              enabled: true\n  chart: aas-bridge\ndestination:\n  server: \'https://kubernetes.default.svc\'\n  namespace: product-knowledge\n')),(0,r.kt)("h3",{id:"5-perform-smoke-tests"},"5. Perform Smoke Tests"),(0,r.kt)("p",null,"This KIT provides a ",(0,r.kt)("a",{parentName:"p",href:"https://www.postman.com/catena-x/workspace/catena-x-knowledge-agents/folder/2757771-3534e62a-e7c3-4f0b-9aad-75afc650d92e?action=share&source=copy-link&creator=2757771&ctx=documentation"},"Postman collection/folder")," and a corresponding ",(0,r.kt)("a",{parentName:"p",href:"https://www.postman.com/catena-x/workspace/catena-x-knowledge-agents/environment/2757771-31115ff3-61d7-4ad6-8310-1e50290a1c3a?action=share&creator=2757771&active-environment=2757771-3a7489c5-7540-470b-8e44-04610511d9a9"},"environment")),(0,r.kt)("p",null,"It consists of the following steps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Query Provider Agent (Internally)"),(0,r.kt)("li",{parentName:"ul"},"Query Provider Agent (Internally from Agent Plane)"),(0,r.kt)("li",{parentName:"ul"},"Query Remoting Agent (Internally)"),(0,r.kt)("li",{parentName:"ul"},"Query Remoting Agent (Internally from Agent Plane)"),(0,r.kt)("li",{parentName:"ul"},"Create Graph Policy (Provider)"),(0,r.kt)("li",{parentName:"ul"},"Create Graph Contract (Provider)"),(0,r.kt)("li",{parentName:"ul"},"Create Data Graph Asset (Provider)"),(0,r.kt)("li",{parentName:"ul"},"Create Function Graph Asset (Provider)"),(0,r.kt)("li",{parentName:"ul"},"Show Own Catalogue (Provider)"),(0,r.kt)("li",{parentName:"ul"},"Query AAS Bridge (Provider)"),(0,r.kt)("li",{parentName:"ul"},"Show Remote Catalogue (Consumer)"),(0,r.kt)("li",{parentName:"ul"},"Query Data Graph Asset (Consumer)"),(0,r.kt)("li",{parentName:"ul"},"Query Function Graph Asset (Consumer)")),(0,r.kt)("sub",null,(0,r.kt)("sup",null,"(C) 2021,2024 Contributors to the Eclipse Foundation. SPDX-License-Identifier: CC-BY-4.0")))}d.isMDXComponent=!0},79294:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/files/dataspace_roles-2722058d268f2f7b0bd9ae311119e300.png"},3389:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/AgentsKit-Icon-d790626da1d452d4369dd7cf814b7dfe.png"},47682:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/dataspace_roles_small-a89af4be34c4336543301064c9483f79.png"}}]);