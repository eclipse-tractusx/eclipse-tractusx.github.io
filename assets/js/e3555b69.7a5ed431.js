"use strict";(self.webpackChunkeclipse_tractusx_github_io=self.webpackChunkeclipse_tractusx_github_io||[]).push([[70243],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),p=d(n),u=i,m=p["".concat(l,".").concat(u)]||p[u]||h[u]||s;return n?a.createElement(m,o(o({ref:t},c),{},{components:n})):a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=n.length,o=new Array(s);o[0]=u;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[p]="string"==typeof e?e:i,o[1]=r;for(var d=2;d<s;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},61225:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var a=n(87462),i=(n(67294),n(3905));const s={id:"Specification Digital Twin KIT",title:"Developing with the DT KIT",description:"Digital Twin KIT",sidebar_position:4},o=void 0,r={unversionedId:"kits/Digital Twin Kit/Software Development View/Specification Digital Twin KIT",id:"version-23.12/kits/Digital Twin Kit/Software Development View/Specification Digital Twin KIT",title:"Developing with the DT KIT",description:"Digital Twin KIT",source:"@site/docs-kits_versioned_docs/version-23.12/kits/Digital Twin Kit/Software Development View/page_software-development-view.md",sourceDirName:"kits/Digital Twin Kit/Software Development View",slug:"/kits/Digital Twin Kit/Software Development View/Specification Digital Twin KIT",permalink:"/docs-kits/23.12/kits/Digital Twin Kit/Software Development View/Specification Digital Twin KIT",draft:!1,tags:[],version:"23.12",sidebarPosition:4,frontMatter:{id:"Specification Digital Twin KIT",title:"Developing with the DT KIT",description:"Digital Twin KIT",sidebar_position:4},sidebar:"kits",previous:{title:"Operation View",permalink:"/docs-kits/23.12/kits/Digital Twin Kit/Operation View Digital Twin Kit"},next:{title:"Introduction",permalink:"/docs-kits/23.12/kits/Digital Twin Kit/Software Development View/API AAS Discovery/dotaas-part-2-http-rest-discovery-service-specification"}},l={},d=[{value:"Digital Twin KIT",id:"digital-twin-kit",level:3},{value:"API Specifications",id:"api-specifications",level:2},{value:"Asset Administration Shell",id:"asset-administration-shell",level:3},{value:"Submodels",id:"submodels",level:4},{value:"Digital Twin Registry",id:"digital-twin-registry",level:4},{value:"Catena-X specific Services",id:"catena-x-specific-services",level:3},{value:"Discovery Sequence",id:"discovery-sequence",level:2},{value:"Sample Data",id:"sample-data",level:2},{value:"Registration at Digital Twin Registry",id:"registration-at-digital-twin-registry",level:3},{value:"Registering a new Twin",id:"registering-a-new-twin",level:4},{value:"Registering a new Submodel at an existing Twin",id:"registering-a-new-submodel-at-an-existing-twin",level:4},{value:"Registration at EDC",id:"registration-at-edc",level:3},{value:"Digital Twin Registry as EDC Data Asset",id:"digital-twin-registry-as-edc-data-asset",level:4},{value:"Submodel as EDC Data Asset",id:"submodel-as-edc-data-asset",level:4},{value:"EDC Usage Policies",id:"edc-usage-policies",level:3},{value:"Data Provisioning",id:"data-provisioning",level:2},{value:"Versioning",id:"versioning",level:3},{value:"Patterns for Submodel Deployment",id:"patterns-for-submodel-deployment",level:3},{value:"Patterns for DTRs",id:"patterns-for-dtrs",level:3}],c={toc:d};function p(e){let{components:t,...s}=e;return(0,i.kt)("wrapper",(0,a.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"DT Kit Pictotogram",src:n(66595).Z,width:"285",height:"244"})),(0,i.kt)("h3",{id:"digital-twin-kit"},"Digital Twin KIT"),(0,i.kt)("h2",{id:"api-specifications"},"API Specifications"),(0,i.kt)("p",null,"All openAPI-specifications for the Digital Twin Kit services are rendered in the section ",(0,i.kt)("a",{parentName:"p",href:"/docs-kits/23.12/kits/Digital%20Twin%20Kit/Software%20Development%20View/API%20AAS%20Discovery/dotaas-part-2-http-rest-discovery-service-specification"},"of these docs")),(0,i.kt)("h3",{id:"asset-administration-shell"},"Asset Administration Shell"),(0,i.kt)("p",null,"The Asset Administration Shell (AAS) is a specification that is released by the",(0,i.kt)("a",{parentName:"p",href:"https://industrialdigitaltwin.org/"},"Industrial Digital Twin Association (IDTA)"),"\nwith a perspective to be adopted by the ",(0,i.kt)("a",{parentName:"p",href:"https://www.iec.ch/homepage"},"International Electrotechnical Commission (IEC)"),".\nIts mission is defining how \u201cinformation about assets ","[\u2026]"," can be exchanged in a meaningful way between partners in a value\ncreation network\u201d. As such, it is well-suited to contribute to the toolbox of Catena-X. While the Spec offers an extensive\nsuite of meta-model elements and APIs, Catena-X only uses a small subset. What exactly is defined in the Catena-X standard\nCX - 0002."),(0,i.kt)("h4",{id:"submodels"},"Submodels"),(0,i.kt)("p",null,"An Asset Administration Shell is organized in Submodels. Each Submodel represents a self-contained aspect of an asset -\ntypical examples are the ",(0,i.kt)("em",{parentName:"p"},"Nameplate")," or ",(0,i.kt)("em",{parentName:"p"},"SingleLevelBomAsBuilt")," (which denotes the hierarchical composition of parts into\na whole). As different aspects of an Asset may be known to different parties on the value-chain, Submodels for a single asset\nmust be capable to run independently of each other. The specification explicitly allows this, enabling easy cross-company\ndata integration."),(0,i.kt)("p",null,"Recognizing that not all use-cases require the full functionality of the AAS-Spec, Catena-X demands that Data\nProviders offer only a subset of the SubmodelServiceSpecification - namely the ",(0,i.kt)("inlineCode",{parentName:"p"},"$value")," serialization. This is an abbreviated\nnotation of an AAS-Submodel that is focused on data instead of context. While it is advisable to expose Submodels with help of\na full-fletched AAS-server SDK that provides the content-modifiers and API-endpoints out-of-the-box, this is not yet\nmandatory."),(0,i.kt)("h4",{id:"digital-twin-registry"},"Digital Twin Registry"),(0,i.kt)("p",null,'What Catena-X calls the "Digital Twin Registry" (DTR) is actually the union of two different services that the AAS specification\nhas specified. For the sake of simplicity, they are both defined in a single component. The DTR serves a similar function as the\nindex in a book: When trying to discover information, it\'s convenient to have an overview WHAT one will find, HOW and WHERE to\naccess it. The registry caters exactly that information: For every asset it knows, it holds a number of Submodel Descriptors and in\nthese, a consumer app will find information what it will find (via the semanticId) and how to access the information (endpoint,\nsecurity setup etc.). As the information contained in the DTR may be sensitive and not be trusted with a central entity,\nevery data provider must offer his own DTR as an EDC Data Asset. While it is only mandatory to implement the GET endpoints\nas specified in the ',(0,i.kt)("a",{parentName:"p",href:"https://eclipse-tractusx.github.io/docs-kits/next/kits/Digital%20Twin%20Kit/Software%20Development%20View/Specification%20Digital%20Twin%20Kit"},"Development View"),",\ndata providers may find it useful to implement other requests for registration on top. Either way, they are free to populate\ntheir DTR in any way they desire."),(0,i.kt)("h3",{id:"catena-x-specific-services"},"Catena-X specific Services"),(0,i.kt)("p",null,"DTRs hold sensitive information: a SubmodelDescriptor may not give access to the actual Submodel-data but all in cumulo hint at\nproduction volumes as each Twin represents an asset. Therefore, Catena-X implements decentral DTRs (DDTR), each running with a\nbusiness partner. ",(0,i.kt)("a",{parentName:"p",href:"https://industrialdigitaltwin.org/en/wp-content/uploads/sites/2/2023/06/Decentralized-Registries-Taxonomy-of-decentralized-registries-and-an-architectural-overview_.pdf"},"In an IDTA-Whitepaper"),",\nseveral high-level concepts for DDTRs are introduced. The AAS-specification remains agnostic to the approaches and endorses\nnone of them. Catena-X must deal with the additional complexity that stems from the interaction with the EDC."),(0,i.kt)("p",null,"Leveraging the native capabilities of the EDC and the EDC Discovery Service, Catena-X uses a discovery pattern that has the\nsame capability as a central ",(0,i.kt)("a",{parentName:"p",href:"#digital-twin-registry"},"Digital Twin Registry"),": It allows to start a Discovery Process with only an AssetId and\nAs none of the options fit the data-space-specific requirements of Catena-X entirely, yet a different approach is implemented:\nHowever, in Catena-X some of the data is deemed so sensitive that a central authority can't be\ntrusted with it. Thus, each Data Provider will run their own DTR which poses a challenge for discovery. After all, a\nData Consumer must still find out the address where to fetch the data from. That's why Catena-X has introduced a\nthree-step discovery pattern made up of the central microservices Discovery Finder, BPN Discovery (or several of them)\nand finally the EDC discovery that is part of the CX-Portal. They are also part of this Kit."),(0,i.kt)("h2",{id:"discovery-sequence"},"Discovery Sequence"),(0,i.kt)("p",null,"The services that make up the Digital Twin Kit partly rely on each other. Executing them in the right sequence allows\na Data Consumer to get access to data whose location was previously unknown. However, this discovery process relies on a\nset of assumptions. Most relevant is the presence of the discovery services defined in CX - 0053 (",(0,i.kt)("a",{parentName:"p",href:"/docs-kits/23.12/kits/Digital%20Twin%20Kit/Software%20Development%20View/API%20Discovery%20Finder/discovery-finder"},"Discovery Finder"),",\n",(0,i.kt)("a",{parentName:"p",href:"/docs-kits/23.12/kits/Digital%20Twin%20Kit/Software%20Development%20View/API%20BPN%20Discovery/bpn-discovery-service"},"BPN Discovery"),") and CX - 0001 (",(0,i.kt)("a",{parentName:"p",href:"/docs-kits/23.12/kits/Digital%20Twin%20Kit/Software%20Development%20View/API%20EDC%20Discovery/post-list-of-bpns-or-an-empty-array-to-retrieve-available-company-connector-authorization-required-roles-view-connectors"},"EDC Discovery"),").\nAs portrayed in the ",(0,i.kt)("a",{parentName:"p",href:"/docs-kits/23.12/kits/Digital%20Twin%20Kit/Operation%20View%20Digital%20Twin%20Kit"},"Operation View"),", these\ndiscovery services are assumed to run centrally in a data space. A concept for decentralization will be validated in the\nfuture."),(0,i.kt)("p",null,'Apart from their presence, the discovery services also must be populated with data by the data providers. This process\nis portrayed in the "setup of registration" section of the diagram below (steps 1-5). They describe the assumed calls\nthat have been made prior to consumer-side discovery. While step 1 was completed during onboarding of a company to the\nCatena-X network, step 2 was executed by the operating company offering the BPN-Discovery Service. Step 3-5 are in the\nresponsibility of each Data Provider. '),(0,i.kt)("p",null,"In steps 6-17, the consumer fetches the previously registered data from the central services and initiates data access.\nPlease note that especially steps 12 & 13 (negotiation at EDC) are simplified in this figure as they are explained in the\nConnector Kit already. The discovery sequence ends with step 17, after which the data consumer can make a request for the\ndata that he set out to find."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"DT Kit Discovery Sequence",src:n(88006).Z,width:"2714",height:"1908"})),(0,i.kt)("p",null,"Some use-cases assume that a consumer has prior knowledge of an asset's location in a provider's infrastructure. That's\nwhy discovering data will not always necessitate executing the whole discovery sequence above. For example,\na consumer may know not only the assetId but also the provider's BPN, allowing him to enter the sequence at step 10.\nIf this prior knowledge is given under all circumstances, registration steps 2-3 can be skipped provider-side."),(0,i.kt)("h2",{id:"sample-data"},"Sample Data"),(0,i.kt)("p",null,"Generic sample data for relevant data objects is contained in the openAPI-specs of the respective services. This chapter\ncontains data structures that are more specifically designed for use in the Digital Twin Kit. They are compliant with\nthe base-specifications (like AAS) but restrict the application even further for use in this Dataspace."),(0,i.kt)("h3",{id:"registration-at-digital-twin-registry"},"Registration at Digital Twin Registry"),(0,i.kt)("p",null,"The Digital Twin Registry connects an asset (identified by its assetIds) with links to the Submodels. Since Catena-X uses\nthe EDC as a gateway for all inter-company interaction, the Digital Twin Registry must account for that. By design, it\nincludes the possibility to add additional context via the fields ",(0,i.kt)("inlineCode",{parentName:"p"},"subprotocol"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"subprotocolBody")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"subprotocolEncoding"),".\n",(0,i.kt)("inlineCode",{parentName:"p"},"subprotocol")," will always be set to ",(0,i.kt)("inlineCode",{parentName:"p"},"DSP"),", short for the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.internationaldataspaces.org/ids-knowledgebase/v/dataspace-protocol/overview/readme"},"Dataspace Protocol"),"\nas standardized by the IDSA. ",(0,i.kt)("inlineCode",{parentName:"p"},"subprotocolEncoding"),"  is always set to ",(0,i.kt)("inlineCode",{parentName:"p"},"plain"),"."),(0,i.kt)("p",null,"There's three relevant inputs to discover a referenced Submodel in Catena-X:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"subprotocolBody")," contains two pieces of information, assigned with ",(0,i.kt)("inlineCode",{parentName:"li"},"=")," and separated by ",(0,i.kt)("inlineCode",{parentName:"li"},";"),":",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dspEndpoint")," is the URL of the Data Plane where a Data Consumer can negotiate for access to this Submodel."),(0,i.kt)("li",{parentName:"ul"},"When calling the /catalog API of that Data Plane, she should filter for dcat:Dataset entries that have are identified\nby the ",(0,i.kt)("inlineCode",{parentName:"li"},"id")," mentioned in the subprotocolBody."))),(0,i.kt)("li",{parentName:"ul"},"After having successfully negotiated for a Data Offer associated with the ",(0,i.kt)("inlineCode",{parentName:"li"},"id"),", the Data Consumer can query the Data Plane\nof the given EDC to access the data. For that, she must use the URL given in the Submodel-Descriptor's ",(0,i.kt)("inlineCode",{parentName:"li"},"href")," field and\nappend the additional URL-segment /$value ")),(0,i.kt)("h4",{id:"registering-a-new-twin"},"Registering a new Twin"),(0,i.kt)("p",null,"Registration of a new twin is (at least in Catena-X) equivalent to the creation of a new twin. Thus, a Data Provider\nshould\nalways ensure that there is no shell-descriptor created for the respective assetIds yet. If there already is one,\nthe submodel-descriptor should\nbe ",(0,i.kt)("a",{parentName:"p",href:"#registering-a-new-submodel-at-an-existing-twin"},"added to the existing shell-descriptor"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"POST /shell-descriptors")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "urn:uuid:e5c96ab5-896a-1234-8761-efd74777ca97",\n  "idShort": "myAas",\n  "specificAssetIds": [\n    {\n      "name": "manufacturerPartId",\n      "value": "BPN:123-345-567103",\n      "externalSubjectId": {\n        "type": "ExternalReference",\n        "keys": [\n          {\n            "type": "GlobalReference",\n            "value": "{{BPN of the a party priviledged}}"\n          }\n        ]\n      }\n    }\n  ],\n  "submodelDescriptors": [\n    {\n      "id": "e5c96ab5-896a-482c-8761-efd74777ca97",\n      "semanticId": {\n        "type": "ExternalReference",\n        "keys": [\n          {\n            "type": "GlobalReference",\n            "value": "urn:bamm:io.catenax.material_for_recycling:1.1.0#MaterialForRecycling"\n          }\n        ]\n      },\n      "endpoints": [\n        {\n          "interface": "SUBMODEL-3.0",\n          "protocolInformation": {\n            "href": "https://edc.data.plane/mypath/submodel",\n            "endpointProtocol": "HTTP",\n            "endpointProtocolVersion": [\n              "1.1"\n            ],\n            "subprotocol": "DSP",\n            "subprotocolBody": "id=123;dspEndpoint=http://edc.control.plane/",\n            "subprotocolBodyEncoding": "plain",\n            "securityAttributes": [\n              {\n                "type": "NONE",\n                "key": "NONE",\n                "value": "NONE"\n              }\n            ]\n          }\n        }\n      ]\n    }\n  ]\n}\n')),(0,i.kt)("h4",{id:"registering-a-new-submodel-at-an-existing-twin"},"Registering a new Submodel at an existing Twin"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"POST /shell-descriptors/{{aasId}}")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "e5c96ab5-896a-482c-8761-efd74777ca97",\n  "semanticId": {\n    "type": "ExternalReference",\n    "keys": [\n      {\n        "type": "GlobalReference",\n        "value": "urn:bamm:io.catenax.material_for_recycling:1.1.0#MaterialForRecycling"\n      }\n    ]\n  },\n  "endpoints": [\n    {\n      "interface": "SUBMODEL-3.0",\n      "protocolInformation": {\n        "href": "https://edc.data.plane/mypath/submodel",\n        "endpointProtocol": "HTTP",\n        "endpointProtocolVersion": [\n          "1.1"\n        ],\n        "subprotocol": "DSP",\n        "subprotocolBody": "id=123;dspEndpoint=http://edc.control.plane/",\n        "subprotocolBodyEncoding": "plain",\n        "securityAttributes": [\n          {\n            "type": "NONE",\n            "key": "NONE",\n            "value": "NONE"\n          }\n        ]\n      }\n    }\n  ]\n}\n\n')),(0,i.kt)("h3",{id:"registration-at-edc"},"Registration at EDC"),(0,i.kt)("p",null,"Integration between the EDC and AAS-Components in the dataspace is a strict prerequisite for robust discovery and data access\nin the Catena-X dataspace. As all data that crosses company-boundaries must be exchanged via an EDC, CX-0002 provides\nthe necessary normative statements to facilitate interoperable data exchange."),(0,i.kt)("p",null,"One relevant question is how the EDC-shielded services of this Kit should register with the Asset endpoint of the EDC Management API.\nWhile the EDC's /v3/assets endpoint is internal to the Data Provider only, the objects are also available via the /catalog API\nthat is specified in the Dataspace Protocol."),(0,i.kt)("p",null,"The EDC uses json-ld for Json-ld is a serialization for RDF graphs (see ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/RDF/"},"Resource Description Framework"),"). The json-ld\n",(0,i.kt)("inlineCode",{parentName:"p"},"@context")," section can declare the namespaces that resources explicitly mentioned in the rest of the document belong to.\nIt may also define default namespace with ",(0,i.kt)("inlineCode",{parentName:"p"},"@vocab"),' for resources without explicitly stated namespaces. Outside of\nthe "@context" section, the ',(0,i.kt)("inlineCode",{parentName:"p"},"@type")," property always defines the class that an object belongs to.\nAs stated in the openAPI-specification of the EDC Management API's relevant endpoint, all entries in the ",(0,i.kt)("inlineCode",{parentName:"p"},"asset/properties"),"\nobject and the ",(0,i.kt)("inlineCode",{parentName:"p"},"privateProperties")," object can be chosen freely. The section on the ",(0,i.kt)("inlineCode",{parentName:"p"},"dataAddress")," is structured depending\non the ",(0,i.kt)("inlineCode",{parentName:"p"},"edc:type")," property. The example below is determined by the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/eclipse-edc/Connector/blob/main/spi/common/core-spi/src/main/java/org/eclipse/edc/spi/types/domain/HttpDataAddress.java"},"HttpDataAddress")," class. Its parameters determine\nthe behavior of the EDC's HTTP data plane at runtime. How they should be used is not subject to standardization since\nthey\naren't visible in the Dataspace. Certain values may have to be set in a certain way to enable the data exchange via\nthe DT Kit."),(0,i.kt)("p",null,"It presents the backend resources as dcat:DataSets with properties funnelled through from the assets-API. These\nproperties can be freely set by the Data Provider."),(0,i.kt)("p",null,"For successful discovery of Digital Twins, it is critical to register Submodels and Digital-Twin-Registries in a\nharmonized way. The following overview shall explain how the ",(0,i.kt)("inlineCode",{parentName:"p"},"asset/properties")," section could be used."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"https://purl.org/dc/terms/type")," (mandatory as per CX-0018): denotes the type of Asset that is registered. The property\npoints to an RDF resource that can be either ",(0,i.kt)("inlineCode",{parentName:"p"},"https://w3id.org/catenax/taxonomy#DigitalTwinRegistry")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"https://w3id.org/catenax/taxonomy#Submodel"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"https://w3id.org/catenax/common/version"),' (mandatory as per CX-0002): version-string of the registered type of resource.\nFor all endpoints related to the AAS-spec, this must be set to "3.0" as that\'s the current normative version of the\nAAS specification.'))),(0,i.kt)("h4",{id:"digital-twin-registry-as-edc-data-asset"},"Digital Twin Registry as EDC Data Asset"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"asset:prop:type")," (mandatory as per CX-0002): denotes the type of Asset that is registered. For all AAS-registries\nthis property must be set to ",(0,i.kt)("inlineCode",{parentName:"li"},"data.core.digitalTwinRegistry"),". This property will likely be removed in the future as\nit was overridden by the mandate in CX-0018.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "@context": {\n    "edc": "https://w3id.org/edc/v0.0.1/ns/",\n    "cx-common": "https://w3id.org/catenax/ontology/common#",\n    "cx-taxo": "https://w3id.org/catenax/taxonomy#",\n    "dct": "https://purl.org/dc/terms/"\n  },\n  "@id": "{{ _.assetId }}",\n  "properties": {\n    "dct:type": {"@id": "cx-taxo:DigitalTwinRegistry"},\n    "cx-common:version": "3.0",\n    "asset:prop:type": "data.core.digitalTwinRegistry"\n  },\n  "privateProperties": {\n  },\n  "dataAddress": {\n    "@type": "DataAddress",\n    "type": "HttpData",\n    "baseUrl": "{{ _.url_backend }}",\n    "proxyQueryParams": "true",\n    "proxyPath": "true",\n    "proxyMethod": "false",\n    "oauth2:tokenUrl": "{{ _.url_keycl_backend }}",\n    "oauth2:clientId": "{{ _.client_id_backend }}",\n    "oauth2:clientSecretKey":"{{ _.sec_name_vault }}"\n  }\n}\n')),(0,i.kt)("p",null,"The HttpDataAddress above configures the following behavior:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"baseUrl"),": After successful negotiation, the data plane will delegate requests here and forward the answer. For the DTR,\nit's critical that the URL inserted here must end before the /shell-descriptors and /lookup segments."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"proxyPath"),': This string can be either "true" or "false". If set to true, the EDC Data Plane will always forward\nthe URL-segments added to the request to the dataplane to the backend URL. For example: If ',(0,i.kt)("inlineCode",{parentName:"li"},'baseUrl="http://mydtr.com/api/v3"'),"\nand ",(0,i.kt)("inlineCode",{parentName:"li"},'proxyPath="true"')," then an authorized request to ",(0,i.kt)("inlineCode",{parentName:"li"},"http://dataplane.com/shell-descriptors")," will be delegated to the backend\n",(0,i.kt)("inlineCode",{parentName:"li"},"http://mydtr.com/api/v3/shell-descriptors")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"proxyQueryParams"),': This string can be either "true" or "false". If set to true, the EDC Data Plane will always forward\nquery parameters to the backend. For the /lookup APIs of the registry, this is critical.'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"proxyMethod"),': This string can be either "true" or "false". If "false", the Data Plane will change the HTTP-Verb to GET\nfor all incoming requests. As there is no scenario in the Catena-X scope where a business partner manipulates data in a\nforeign DTR, it should be set to false.')),(0,i.kt)("h4",{id:"submodel-as-edc-data-asset"},"Submodel as EDC Data Asset"),(0,i.kt)("p",null,"A Data Provider may create\none Data Asset per Submodel or bundle them into one - yielding a smaller catalogue hence better performance. The discovery-sequence,\ndoes not strictly require uniformity here. Not even the typization via the EDC-property ",(0,i.kt)("inlineCode",{parentName:"p"},"dct:type")," is functionally\nnecessary. The discovery-sequence is still intact since a Data Consumer will always know the Submodel's\nlocation relative to the Data Plane's ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," from the submodel-descriptor's ",(0,i.kt)("inlineCode",{parentName:"p"},"href")," field.\nThe EDC-Asset shielding the Submodel is known from the descriptor's ",(0,i.kt)("inlineCode",{parentName:"p"},"subprotocolBody")," containing the Control-Plane-URL and\nid of the EDC-Asset. For more details, see section ",(0,i.kt)("a",{parentName:"p",href:"#registration-at-digital-twin-registry"},"Submodel Descriptor in the Digital Twin Registry"),"."),(0,i.kt)("p",null,"The following shows an example for registration of a single AAS-Submodel as EDC Data Asset. The\n",(0,i.kt)("inlineCode",{parentName:"p"},"properties")," section is analogous to that of the DTR but additionally holds ",(0,i.kt)("inlineCode",{parentName:"p"},"hasSemantics:semanticId"),". It is\nrecommended and shall signify the meaning of the Submodel's payload."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "@context": {\n    "edc": "https://w3id.org/edc/v0.0.1/ns/",\n    "cx-common": "https://w3id.org/catenax/ontology/common#",\n    "cx-taxo": "https://w3id.org/catenax/taxonomy#",\n    "dct": "https://purl.org/dc/terms/",\n    "aas-semantics": "https://admin-shell.io/aas/3/0/HasSemantics/"\n  },\n  "@id": "{{ _.assetId }}",\n  "properties": {\n    "dct:type": {"@id": "cx-taxo:Submodel"},\n    "cx-common:version": "3.0",\n    "aas-semantics:semanticId": {"@id":  "urn:bamm:io.catenax.asset_tracker_links:1.0.0#AssetTrackerLinks"}\n  },\n  "privateProperties": {\n  },\n  "dataAddress": {\n    "@type": "DataAddress",\n    "type": "HttpData",\n    "baseUrl": "{{ _.url_backend }}",\n    "oauth2:tokenUrl": "{{ _.url_keycl_backend }}",\n    "oauth2:clientId": "{{ _.client_id_backend }}",\n    "oauth2:clientSecretKey":"{{ _.sec_name_vault }}",\n    "proxyQueryParams": "false",\n    "proxyPath": "true",\n    "proxyMethod": "false"\n  }\n}\n')),(0,i.kt)("p",null,"There is no normative guidance yet on how to register multiple Submodels bundled together yet. These bundles may include\nall the Submodels of a specific semanticId, all Submodels of an asset or any other arbitrary quality. This may be added to\nCX-0002 in future iterations. Even though the IDTA specifies a ",(0,i.kt)("a",{parentName:"p",href:"https://app.swaggerhub.com/apis/Plattform_i40/SubmodelRepositoryServiceSpecification/V3.0.1_SSP-002"},"Submodel Repository API"),",\nin the context of the Catena-X architecture it is not strictly necessary to adhere to it. Submodels will be found regardless,\ngiven the URL-path relative to the ",(0,i.kt)("inlineCode",{parentName:"p"},"baseUrl")," is appended correctly to the Data Plane's URL in the ",(0,i.kt)("inlineCode",{parentName:"p"},"href")," field. The only\ndifferences are the changed typization. ",(0,i.kt)("inlineCode",{parentName:"p"},"proxyPath")," parameter  should be set ",(0,i.kt)("inlineCode",{parentName:"p"},'"true"')," either way."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "@context": {\n    "edc": "https://w3id.org/edc/v0.0.1/ns/",\n    "cx-common": "https://w3id.org/catenax/ontology/common#",\n    "cx-taxo": "https://w3id.org/catenax/taxonomy#",\n    "dct": "https://purl.org/dc/terms/"\n  },\n  "@id": "{{ _.assetId }}",\n  "properties": {\n    "dct:type": {"@id": "cx-taxo:SubmodelBundle"},\n    "cx-common:version": "3.0"\n  },\n  "privateProperties": {\n  },\n  "dataAddress": {\n    "@type": "DataAddress",\n    "type": "HttpData",\n    "baseUrl": "{{ _.url_backend }}",\n    "oauth2:tokenUrl": "{{ _.url_keycl_backend }}",\n    "oauth2:clientId": "{{ _.client_id_backend }}",\n    "oauth2:clientSecretKey":"{{ _.sec_name_vault }}",\n    "proxyQueryParams": "false",\n    "proxyPath": "true",\n    "proxyMethod": "false"\n  }\n}\n')),(0,i.kt)("h3",{id:"edc-usage-policies"},"EDC Usage Policies"),(0,i.kt)("p",null,"The decision what policies shall be implemented for the exchange of data is at the discretion of each use-case and cannot\nbe standardized in the context of the semantics-standards or the DT Kit."),(0,i.kt)("h2",{id:"data-provisioning"},"Data Provisioning"),(0,i.kt)("h3",{id:"versioning"},"Versioning"),(0,i.kt)("p",null,"Versioning in the Catena-X network is an essential task. This holds true for Digital Twins more specifically, too. The\nnetwork builds on several specifications where changes in API or specifications could break existing communication\nchannels.\nIn a simple scenario (where the Data Provider offers access to a Submodel via DTR and a Data Consumer GETs both\nresources),\nthese are the layers of complexity:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Versioned Object"),(0,i.kt)("th",{parentName:"tr",align:null},"Presence in the ",(0,i.kt)("a",{parentName:"th",href:"#discovery-sequence"},"DT-Discovery")," Process"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Method to increment"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Dataspace Protocol"),(0,i.kt)("td",{parentName:"tr",align:null},"12, 22"),(0,i.kt)("td",{parentName:"tr",align:null},"The body of the ",(0,i.kt)("inlineCode",{parentName:"td"},"{{consumerControlPlane}}/v2/catalog/request"),"-request points to a versioned endpoint of a business partner's DSP endpoint like ",(0,i.kt)("inlineCode",{parentName:"td"},"{{providerControlPlane}}/api/v1/dsp")),(0,i.kt)("td",{parentName:"tr",align:null},"Unclear, under discussion in Connector Kit.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"AAS Specification"),(0,i.kt)("td",{parentName:"tr",align:null},"4, 5, 15, 25"),(0,i.kt)("td",{parentName:"tr",align:null},"For all AAS-related EDC-Assets (styled as dcat:Dataset in the catalog), a property cx-common:version must be added referring to the major and minor version of the AAS-spec."),(0,i.kt)("td",{parentName:"tr",align:null},"Unclear, under discussion in DT Kit.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Data Model Version"),(0,i.kt)("td",{parentName:"tr",align:null},"5, 21, 29"),(0,i.kt)("td",{parentName:"tr",align:null},"The structure of the Submodel is determined by the aspect-model's URN. It includes a section on versioning."),(0,i.kt)("td",{parentName:"tr",align:null},"A new version of the schema requires setup of a new submodel. This includes registration at the DTR.")))),(0,i.kt)("p",null,"Here's a list of duties for Data Providers in case they integrate a new Submodel (or version of an existing one) to an existing\ntwin:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Expose a new Submodel to the Dataspace. If its URL is a subpath of one that's already registered as a EDC-Asset,\nthere is no need to specifically register it as a new EDC-Asset and create a Contract Definition for it. However,\nif there is no such EDC-Asset, that's what a Data Provider must do: create an Asset, connect it to policies via the contract-\ndefinition-API and let consumers negotiate for it."),(0,i.kt)("li",{parentName:"ul"},"If only assetIds are known, the aasId can be discovered via ",(0,i.kt)("inlineCode",{parentName:"li"},"GET https://mydtr.com/api/v3.0/lookup/shells?assetIds=...")," as specified\nby CX-0002."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"POST https://mydtr.com/api/v3.0/shell-descriptors/{{aasId}}/submodel-descriptors")," with the (known or obtained) aasId in the path\nand the new submodel-descriptor in the body of the request. The attribute ",(0,i.kt)("inlineCode",{parentName:"li"},"semanticId")," is mandatory for submodel-descriptors in Catena-X.\nAs defined in CX-0002, semanticIds in Catena-X are  aspect-model-urns (see CX-0003) including a version.")),(0,i.kt)("h3",{id:"patterns-for-submodel-deployment"},"Patterns for Submodel Deployment"),(0,i.kt)("p",null,"Data Providers will usually follow one of two patterns:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Digital Twin Repository: Deploying a dedicated Repository for the persistence of digital twins and related data is the most\nconvenient way to get started with the AAS. Due to the risk of data duplication and unclear initial ingestion\nmechanisms, it may not scale to industrial sizes."),(0,i.kt)("li",{parentName:"ol"},"Delegation: Wrapping another API or a database may deploy the Submodel API as a new facade. It delegates the incoming\nrequests to the respective backend systems. This is particularly feasible in the Catena-X dataspace since it")),(0,i.kt)("p",null,"Offering data to the network requires mappings that are naturally dependent on the data source format. More on data integration\ncan be found in the corresponding ",(0,i.kt)("a",{parentName:"p",href:"https://catena-x.net/fileadmin/user_upload/04_Einfuehren_und_umsetzen/Onboarding/DataIntegrationPatterns_Guide_Final_V1.pdf"},"CX e.V. guide"),"."),(0,i.kt)("h3",{id:"patterns-for-dtrs"},"Patterns for DTRs"),(0,i.kt)("p",null,"Usually, a DTR will implement a persistence with the specified AAS-APIs for data ingestion specified in the SSP-001 by\nmeans of POST endpoints, updatable with PUT and PATCH requests (\nsee ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/eclipse-tractusx/sldt-digital-twin-registry"},"reference implementation"),").\nThese APIs should only be accessible by the Data Provider (for instance by introduction of proper access control scopes\nor setting ",(0,i.kt)("inlineCode",{parentName:"p"},"proxyMethod = false"),", see ",(0,i.kt)("a",{parentName:"p",href:"#digital-twin-registry-as-edc-data-asset"},"registration"),"). Delegation\nas backend integration pattern is more inconvenient as the DTR must process and return reproducable IDs not only for\nthe assets but also for the AAS - this is hard to realize in a pure stateless implementation."))}p.isMDXComponent=!0},88006:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/DTKIT_discovery_seq-1bdc771bb6d7dbc8fda0e9b71946113d.svg"},66595:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/DTKIT_pictogram_blue-27dcbba19b516a444d647f3f8377ce4f.png"}}]);