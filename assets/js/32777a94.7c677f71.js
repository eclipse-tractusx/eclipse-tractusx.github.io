"use strict";(self.webpackChunkeclipse_tractusx_github_io=self.webpackChunkeclipse_tractusx_github_io||[]).push([[29857],{28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var i=n(96540);const s={},a=i.createContext(s);function r(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:t},e.children)}},64703:(e,t,n)=>{n.d(t,{A:()=>i});const i="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEiIGhlaWdodD0iMTEiIHZpZXdCb3g9Ii0uNSAtLjUgMTEgMTEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgc3Ryb2tlPSIjZmFhMDIzIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJub25lIj48cGF0aCBkPSJNMTAgNXY1SDBWMGg1IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTQgNWwxLjM5LTEuMTYiIGZpbGw9Im5vbmUiIHN0cm9rZS13aWR0aD0iLjEiLz48cGF0aCBkPSJNMTAgMEw2LjY3IDUuMzggNC4xMSAyLjN6IiBmaWxsPSIjZmFhMDIzIiBzdHJva2Utd2lkdGg9Ii4xIi8+PHBhdGggZD0iTTIgN2w0LTQiIGZpbGw9Im5vbmUiLz48L2c+PC9zdmc+"},83151:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/behaviour-twin-hi-kit-icon-mini-a446e6db3dca63644e32156c46622065.svg"},98616:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"kits/behaviour-twin-kit/use-cases/hi/development-view/skill","title":"Skill","description":"Behaviour Twin KIT","source":"@site/docs-kits/kits/behaviour-twin-kit/use-cases/hi/development-view/skill.md","sourceDirName":"kits/behaviour-twin-kit/use-cases/hi/development-view","slug":"/kits/behaviour-twin-kit/use-cases/hi/development-view/skill","permalink":"/docs-kits/next/kits/behaviour-twin-kit/use-cases/hi/development-view/skill","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"skill","title":"Skill","description":"Behaviour Twin KIT"},"sidebar":"kits","previous":{"title":"Service Bindings","permalink":"/docs-kits/next/kits/behaviour-twin-kit/use-cases/hi/development-view/service-bindings"},"next":{"title":"Business Partner KIT","permalink":"/docs-kits/next/category/business-partner-kit"}}');var s=n(74848),a=n(28453);const r={id:"skill",title:"Skill",description:"Behaviour Twin KIT"},o=void 0,l={},c=[{value:"SKILL DEFINITION",id:"skill-definition",level:2},{value:"FULL EXAMPLE",id:"full-example",level:3},{value:"DETAILED INFORMATION",id:"detailed-information",level:3},{value:"SELECT STATEMENT",id:"select-statement",level:4},{value:"PARAMETERS",id:"parameters",level:4},{value:"FUNCTION ASSET RESOLUTION",id:"function-asset-resolution",level:4},{value:"DATA ASSET RESOLUTION",id:"data-asset-resolution",level:4},{value:"RESOLVING VEHICLE, PART OF INTEREST, ITS SUPPLIER AND THE RELATED LOAD DATA",id:"resolving-vehicle-part-of-interest-its-supplier-and-the-related-load-data",level:4},{value:"INVOKE CALCULATION SERVICE AT SUPPLIER",id:"invoke-calculation-service-at-supplier",level:4},{value:"SKILL REGISTRATION AND INVOCATION",id:"skill-registration-and-invocation",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{style:{display:"block"},children:[(0,s.jsx)("div",{style:{display:"inline-block",verticalAlign:"top"},children:(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Behaviour Twin KIT -- Health Indicator banner",src:n(83151).A+"",width:"51",height:"42"})})}),(0,s.jsx)("div",{style:{display:"inline-block",fontSize:17,color:"rgb(255,166,1)",marginLeft:7,verticalAlign:"top",paddingTop:6},children:(0,s.jsx)(t.p,{children:"Behaviour Twin KIT -- Health Indicator"})})]}),"\n",(0,s.jsxs)(t.p,{children:["Applies to role: ",(0,s.jsx)(t.em,{children:"HI skill provider"})," and ",(0,s.jsx)(t.em,{children:"HI consumer"})]}),"\n",(0,s.jsx)(t.h2,{id:"skill-definition",children:"SKILL DEFINITION"}),"\n",(0,s.jsx)(t.p,{children:"The example skill below is inteded to calculate HI values of a vehicle part. It is an advanced skill which resolves the funtion arguments by itself using graph shape descriptions."}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.em,{children:"consumer"})," is also the ",(0,s.jsx)(t.em,{children:"skill proivder"})," and, in the special HI case, the ",(0,s.jsx)(t.em,{children:"data provider"})," (the OEM). It requests the calculation by providing the vehicle identification numbers (VINs) of the vehicles. The usage data are representated as load data in form of load spectra at the OEM. The supplier of the part (component of interest) provides the related HI calculation service, which accepts load spectra as input arguments."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.em,{children:"skill provider"})," (in this example also the OEM), has to implement the skill and register it over the ",(0,s.jsx)(t.em,{children:"Agent Plane API"})," or call it ad hoc."]}),"\n",(0,s.jsxs)(t.p,{children:["In the current example, a HI skill for a gearbox is implemented with the ",(0,s.jsxs)(t.a,{href:"https://www.w3.org/TR/sparql11-query/",children:["SPARQL 1.1 Query Language ",(0,s.jsx)(t.img,{alt:"(external link)",src:n(64703).A+"",width:"11",height:"11"})]})," as a query. The query is a federated query, which means that the query is split into three parts: One general part, one for the ",(0,s.jsx)(t.em,{children:"data provider"}),"/OEM and one for the ",(0,s.jsx)(t.em,{children:"calculation service provider"}),"/supplier. In the first part, function assets (in the supplier's catalog/OEM's federated catalog) are resolved by the desired result type. Then, OEM-owned reliability assets are resolved by the required function arguments of resolved function assets. In the second part (at the OEM), the vehicle, subsequent the part of interest, the related load data asset and the supplier of the part are resolved. In the third part (at the supplier), the gathered data is fed back into the respective supplier EDC connector/agent to perform a HI calculation."]}),"\n",(0,s.jsxs)(t.p,{children:["For more information regarding skill development, registration and invocation options, see ",(0,s.jsx)(t.a,{href:"../../../../knowledge-agents-kit/operation-view/agent-edc",children:"Agents KIT's Operation View"}),"."]}),"\n",(0,s.jsx)(t.h3,{id:"full-example",children:"FULL EXAMPLE"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sparql",children:'PREFIX sh: <http://www.w3.org/ns/shacl#>\nPREFIX schema: <http://schema.org/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\nPREFIX json: <https://json-schema.org/draft/2020-12/schema#>\nPREFIX cx-sh: <https://w3id.org/catenax/ontology/schema#>\nPREFIX cx-common: <https://w3id.org/catenax/ontology/common#>\nPREFIX cx-core: <https://w3id.org/catenax/ontology/core#>\nPREFIX cx-reliability: <https://w3id.org/catenax/ontology/reliability#>\nPREFIX cx-schema: <https://w3id.org/catenax/ontology/schema#>\nPREFIX cx-vehicle: <https://w3id.org/catenax/ontology/vehicle#>\nPREFIX cx-behaviour: <https://w3id.org/catenax/ontology/behaviour#>\nPREFIX cx-taxo: <https://w3id.org/catenax/taxonomy#>\n\n################################################################\n# Sample for a Provider-Deployed Goal-Oriented SPARQL Skill which\n#  - Depending on the targeted result\n#  - Finds the right supplier prognosis asset and its preconditions\n#  - jumps into the OEM-owned reliability asset to obtain the required data\n#  - feeds the gathered data back into the respective supplier connector/agent\n#    to perform a behavioral prognosis\n# Author: cgjung\n# (c) 2023-2024 Catena-X association\n################################################################\n\nSELECT DISTINCT ?vin ?supplier ?vehicle ?assembly ?operatingTime ?mileage ?prognosis WHERE {\n\n  VALUES (?vin ?aggregate ?result_type) {\n      ("@vin"^^xsd:string "Differential Gear"^^xsd:string <@resultType>)\n  }\n\n  # Determine the prognosis assets\n  ?output sh:path ?result_type .\n  ?output cx-sh:outputOf ?functionShape .\n  ?assetFunction cx-sh:shapeObject ?functionShape .\n  ?functionConnector cx-common:offers ?assetFunction .\n  ?functionShape cx-sh:extensionOf* ?parentFunctionShape .\n  ?functionShape sh:targetClass ?function .\n  ?parentFunctionShape sh:property ?functionProperty .\n  ?functionProperty cx-sh:hasAsArgument ?argument .\n  ?functionProperty sh:in ?parameters .\n  ?parameters rdf:rest*/rdf:first ?ls_type .\n\n  # Determine the target\n  ?assetData cx-sh:shapeObject ?nodeShape .\n  ?dataConnector cx-common:offers ?assetData .\n  ?nodeShape sh:property ?propertyShape .\n  ?propertyShape sh:path ?argument .\n  ?propertyShape sh:in ?parameters_target .\n  ?parameters_target rdf:rest*/rdf:first ?ls_type .\n\n  SERVICE ?dataConnector {\n    GRAPH ?assetData {\n        ?vehicle rdf:type cx-vehicle:Vehicle ;\n            cx-vehicle:vehicleIdentificationNumber ?vin .\n\n        ?assembly rdf:type cx-vehicle:Part ;\n            cx-vehicle:name ?aggregate ;\n            cx-vehicle:isPartOf ?vehicle ;\n            cx-vehicle:supplier ?supplier .\n\n        ?teleAnalysis rdf:type cx-reliability:Analysis ;\n             cx-reliability:analysedObject ?assembly ;\n             cx-reliability:operatingHoursOfVehicle ?operatingTime ;\n             cx-reliability:mileageOfVehicle ?mileage ;\n             cx-core:startDateTime ?recordDate ;\n             cx-reliability:result [\n                 cx-core:id ?ls_type ;\n                 cx-core:name ?ls_name ;\n                 cx-reliability:countingValue ?ls_value ;\n                 cx-reliability:countingUnit ?ls_unit ;\n                 cx-reliability:countingMethod ?ls_method ;\n                 cx-reliability:channels ?ls_channels ;\n                 cx-reliability:classes ?ls_classes ;\n                 cx-reliability:values ?ls_values\n             ] .\n    }\n  }\n\n  SERVICE ?functionConnector {\n    GRAPH ?assetFunction {\n      SELECT ?prognosis WHERE {\n        ?invocation a ?function ;\n              cx-behaviour:sender <bpn:legal:BPNLOEM> ;\n              cx-behaviour:senderConnector <edc://sender> ;\n              cx-behaviour:recipient <bpn:legal:BPNLSUPPLIER> ;\n              cx-behaviour:recipientConnector <edc://recipient> ;\n              cx-behaviour:targetDate ?recordDate ;\n              cx-behaviour:timeStamp ?recordDate ;\n              cx-behaviour:component ?assembly ;\n              cx-behaviour:observationType ?ls_type ;\n              cx-behaviour:statusDate ?recordDate ;\n              cx-behaviour:statusOperatingHours ?operatingTime ;\n              cx-behaviour:statusMileage ?mileage ;\n              cx-behaviour:countingValue ?ls_value ;\n              cx-behaviour:countingUnit ?ls_unit ;\n              cx-behaviour:countingMethod ?ls_method ;\n              cx-behaviour:headerChannels ?ls_channels ;\n              cx-behaviour:bodyClasses ?ls_classes ;\n              cx-behaviour:bodyCountsList ?ls_values ;\n              ?result_type ?prognosis .\n        }\n    }\n  } # SUPPLIER#CATALOG\n\n} # SELECT\n'})}),"\n",(0,s.jsx)(t.h3,{id:"detailed-information",children:"DETAILED INFORMATION"}),"\n",(0,s.jsx)(t.h4,{id:"select-statement",children:"SELECT STATEMENT"}),"\n",(0,s.jsx)(t.p,{children:"The select statement defines, which data should be returned."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sparql",children:"SELECT DISTINCT ?vin ?supplier ?vehicle ?assembly ?operatingTime ?mileage ?prognosis WHERE {\n"})}),"\n",(0,s.jsx)(t.h4,{id:"parameters",children:"PARAMETERS"}),"\n",(0,s.jsxs)(t.p,{children:["The parameter ",(0,s.jsx)(t.code,{children:"vin"})," (list of VINs for vehicles of interest) is the central external parameter that is provided by the caller of this skill. ",(0,s.jsx)(t.code,{children:"aggregate"})," is set to ",(0,s.jsx)(t.code,{children:"Differential Gear"})," to identify the component of interest (gearbox). ",(0,s.jsx)(t.code,{children:"result_type"})," is also an external parameter that can be set to either ",(0,s.jsx)(t.code,{children:"https://w3id.org/catenax/ontology/behaviour#HealthIndicatorResult"})," or to ",(0,s.jsx)(t.code,{children:"https://w3id.org/catenax/ontology/behaviour#RemainingUsefulLifeResult"}),". The result types are extensible. With this generalized skill, different calculation types can be executed. In the HI use case, it must be set to ",(0,s.jsx)(t.code,{children:"https://w3id.org/catenax/ontology/behaviour#HealthIndicatorResult"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sparql",children:'  VALUES (?vin ?aggregate ?result_type) {\n      ("@vin"^^xsd:string "Differential Gear"^^xsd:string <@resultType>)\n  }\n'})}),"\n",(0,s.jsx)(t.h4,{id:"function-asset-resolution",children:"FUNCTION ASSET RESOLUTION"}),"\n",(0,s.jsx)(t.p,{children:"All funciton assets with the desired output type within the consumer's federated catalog are resolved. With these assets, the providing connectors are also resolved. In addition, for these assets, the arguments and their load spectrum types are resolved."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sparql",children:"  # Determine the prognosis assets\n  ?output sh:path ?result_type .\n  ?output cx-sh:outputOf ?functionShape .\n  ?assetFunction cx-sh:shapeObject ?functionShape .\n  ?functionConnector cx-common:offers ?assetFunction .\n  ?functionShape cx-sh:extensionOf* ?parentFunctionShape .\n  ?functionShape sh:targetClass ?function .\n  ?parentFunctionShape sh:property ?functionProperty .\n  ?functionProperty cx-sh:hasAsArgument ?argument .\n  ?functionProperty sh:in ?parameters .\n  ?parameters rdf:rest*/rdf:first ?ls_type .\n"})}),"\n",(0,s.jsx)(t.h4,{id:"data-asset-resolution",children:"DATA ASSET RESOLUTION"}),"\n",(0,s.jsx)(t.p,{children:"All data assets that are related to the function assets (same shape and load spectrum types) within the consumer's federated catalog are resolved. With the assets, the providing connectors are also resolved."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sparql",children:"  # Determine the target\n  ?assetData cx-sh:shapeObject ?nodeShape .\n  ?dataConnector cx-common:offers ?assetData .\n  ?nodeShape sh:property ?propertyShape .\n  ?propertyShape sh:path ?argument .\n  ?propertyShape sh:in ?parameters_target .\n  ?parameters_target rdf:rest*/rdf:first ?ls_type .\n"})}),"\n",(0,s.jsx)(t.h4,{id:"resolving-vehicle-part-of-interest-its-supplier-and-the-related-load-data",children:"RESOLVING VEHICLE, PART OF INTEREST, ITS SUPPLIER AND THE RELATED LOAD DATA"}),"\n",(0,s.jsx)(t.p,{children:"The resolved connector must be the OEM's connector. There, the graph asset for the usage data is requested. Doing so, a sub-skill is transferred to the OEM's Knowledge Agent (if the consumer is not the OEM). At the OEM, the vehicle is resolved by its VIN. Then, the part of interrest (assembly) and its supplier are resolved by the part's name. At the end, the load for that part can be resolved by the component of interest (assembly) and the load spectrum types that are required by the function arguments."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sparql",children:"  SERVICE ?dataConnector {\n    GRAPH ?assetData {\n        ?vehicle rdf:type cx-vehicle:Vehicle ;\n            cx-vehicle:vehicleIdentificationNumber ?vin .\n\n        ?assembly rdf:type cx-vehicle:Part ;\n            cx-vehicle:name ?aggregate ;\n            cx-vehicle:isPartOf ?vehicle ;\n            cx-vehicle:supplier ?supplier .\n\n        ?teleAnalysis rdf:type cx-reliability:Analysis ;\n             cx-reliability:analysedObject ?assembly ;\n             cx-reliability:operatingHoursOfVehicle ?operatingTime ;\n             cx-reliability:mileageOfVehicle ?mileage ;\n             cx-core:startDateTime ?recordDate ;\n             cx-reliability:result [\n                 cx-core:id ?ls_type ;\n                 cx-core:name ?ls_name ;\n                 cx-reliability:countingValue ?ls_value ;\n                 cx-reliability:countingUnit ?ls_unit ;\n                 cx-reliability:countingMethod ?ls_method ;\n                 cx-reliability:channels ?ls_channels ;\n                 cx-reliability:classes ?ls_classes ;\n                 cx-reliability:values ?ls_values\n             ] .\n    }\n  }\n"})}),"\n",(0,s.jsx)(t.h4,{id:"invoke-calculation-service-at-supplier",children:"INVOKE CALCULATION SERVICE AT SUPPLIER"}),"\n",(0,s.jsx)(t.p,{children:"At the supplier's EDC connector, the graph asset of the HI calculation service is requested. Doing so, a sub-skill is transferred to the supplier's Knowledge Agent. At the supplier, the HI calculation service is called implicit due to its service binding to the knowledge graph. The result then is bound to the knowledge graph."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sparql",children:"  SERVICE ?functionConnector {\n    GRAPH ?assetFunction {\n      SELECT ?prognosis WHERE {\n        ?invocation a ?function ;\n              cx-behaviour:sender <bpn:legal:BPNLOEM> ;\n              cx-behaviour:senderConnector <edc://sender> ;\n              cx-behaviour:recipient <bpn:legal:BPNLSUPPLIER> ;\n              cx-behaviour:recipientConnector <edc://recipient> ;\n              cx-behaviour:targetDate ?recordDate ;\n              cx-behaviour:timeStamp ?recordDate ;\n              cx-behaviour:component ?assembly ;\n              cx-behaviour:observationType ?ls_type ;\n              cx-behaviour:statusDate ?recordDate ;\n              cx-behaviour:statusOperatingHours ?operatingTime ;\n              cx-behaviour:statusMileage ?mileage ;\n              cx-behaviour:countingValue ?ls_value ;\n              cx-behaviour:countingUnit ?ls_unit ;\n              cx-behaviour:countingMethod ?ls_method ;\n              cx-behaviour:headerChannels ?ls_channels ;\n              cx-behaviour:bodyClasses ?ls_classes ;\n              cx-behaviour:bodyCountsList ?ls_values ;\n              ?result_type ?prognosis .\n        }\n    }\n  } # SUPPLIER#CATALOG\n\n} # SELECT\n"})}),"\n",(0,s.jsx)(t.h2,{id:"skill-registration-and-invocation",children:"SKILL REGISTRATION AND INVOCATION"}),"\n",(0,s.jsxs)(t.p,{children:["For skill registration and invocation, have a look at the ",(0,s.jsx)(t.a,{href:"../../../software-development-view/skill#skill-registration",children:"general Development View"}),"."]})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);