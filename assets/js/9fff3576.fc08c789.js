"use strict";(self.webpackChunkeclipse_tractusx_github_io=self.webpackChunkeclipse_tractusx_github_io||[]).push([[96785],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var s=t(96540);const r={},i=s.createContext(r);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:n},e.children)}},43497:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"release/trg-5/trg-5-05","title":"TRG 5.05 - Chart Values","description":"| Status | Created     | Post-History           |","source":"@site/docs/release/trg-5/trg-5-05.md","sourceDirName":"release/trg-5","slug":"/release/trg-5/trg-5-05","permalink":"/docs/release/trg-5/trg-5-05","draft":false,"unlisted":false,"editUrl":"https://github.com/eclipse-tractusx/eclipse-tractusx.github.io/tree/main/docs/release/trg-5/trg-5-05.md","tags":[],"version":"current","frontMatter":{"title":"TRG 5.05 - Chart Values"},"sidebar":"docs","previous":{"title":"TRG 5.04 - Resource Management","permalink":"/docs/release/trg-5/trg-5-04"},"next":{"title":"TRG 5.06 - Application Configuration","permalink":"/docs/release/trg-5/trg-5-06"}}');var r=t(74848),i=t(28453);const a={title:"TRG 5.05 - Chart Values"},l=void 0,o={},c=[{value:"Why",id:"why",level:2},{value:"Description",id:"description",level:2},{value:"Container images",id:"container-images",level:2},{value:"Ingress",id:"ingress",level:2},{value:"Dependencies",id:"dependencies",level:2}];function d(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Status"}),(0,r.jsx)(n.th,{children:"Created"}),(0,r.jsx)(n.th,{children:"Post-History"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Update"}),(0,r.jsx)(n.td,{children:"29-Feb-2024"}),(0,r.jsx)(n.td,{children:"new examples and rules"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Active"}),(0,r.jsx)(n.td,{children:"10-Nov-2022"}),(0,r.jsx)(n.td,{children:"Initial release"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"why",children:"Why"}),"\n",(0,r.jsx)(n.p,{children:"When external entities need to setup a whole Eclipse Tractus-X setup, they might need to configure multiply helm charts. To reduce errors and make it efficient overall, this guide aligns basic helm values across all products."}),"\n",(0,r.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["Rules and best practices for Helm chart ",(0,r.jsx)(n.code,{children:"values.yaml"})," file."]}),"\n",(0,r.jsx)(n.h2,{id:"container-images",children:"Container images"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Image tag ",(0,r.jsx)(n.strong,{children:"should not"})," be set by default and it should fall back to the\n",(0,r.jsx)(n.code,{children:"appVersion"})," property from the ",(0,r.jsx)(n.code,{children:"Chart.yaml"})," file. In specific cases\n(e.g.: Chart contains multiple pod templates that use different images and versions)\nimage tag can be set explicitly."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pullPolicy"})," ",(0,r.jsx)(n.strong,{children:"must"})," default to 'IfNotPresent'"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["A proper section for Container images ",(0,r.jsx)(n.strong,{children:"should"})," look like this:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'image:\n  registry: docker.io\n  repository: bitnami/postgresql\n  tag: ""\n  digest: ""\n  pullPolicy: IfNotPresent\n  ## Optionally specify an array of imagePullSecrets.\n  ## Secrets must be manually created in the namespace.\n  ## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/\n  ## Example:\n  ## pullSecrets:\n  ##   - myRegistryKeySecretName\n  ##\n  pullSecrets: []\n  ## Set to true if you would like to see extra information on logs\n  ##\n'})}),"\n",(0,r.jsxs)(n.admonition,{type:"caution",children:[(0,r.jsxs)(n.mdxAdmonitionTitle,{children:["do not use ",(0,r.jsx)(n.code,{children:"latest"})," as image tag!"]}),(0,r.jsxs)(n.p,{children:["This might cause unexpected effects, as the Helm release could change without bumping the chart version! Also due to\nsecurity reasons you shall not use ",(0,r.jsx)(n.code,{children:"latest"})," tag. If the image tag should be set to a pinned tag (e.g.: ",(0,r.jsx)(n.code,{children:"latest"}),") anyway, it should done in an additional (environment specific) values.yaml and in this case the image's ",(0,r.jsx)(n.strong,{children:"pullPolicy"})," is recommended to be set to ",(0,r.jsx)(n.code,{children:"Always"}),"."]})]}),"\n",(0,r.jsx)(n.h2,{id:"ingress",children:"Ingress"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ingress ",(0,r.jsx)(n.strong,{children:"must"})," be disabled by default"]}),"\n",(0,r.jsxs)(n.li,{children:["Hostname ",(0,r.jsx)(n.strong,{children:"must"})," not be set by default"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"An example section for ingress resources:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'ingress:\n  enabled: false\n  # className: "nginx"\n  ## Optional annotations when using the nginx ingress class\n  #annotations:\n  #  nginx.ingress.kubernetes.io/rewrite-target: "/$1"\n  #  nginx.ingress.kubernetes.io/use-regex: "true"\n  #  nginx.ingress.kubernetes.io/enable-cors: "true"\n  #  nginx.ingress.kubernetes.io/cors-allow-origin: "https://*.example.org"\n  tls: []\n    # - secretName: ""\n    #   hosts:\n    #     - ""\n  hosts:\n    - host: ""\n      paths:\n        - path: "/"\n          pathType: "Prefix"\n          backend:\n            service: "app"\n            port: 8080\n'})}),"\n",(0,r.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"An example section for Postgresql dependency configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'postgresql:\n  ## PostgreSQL chart configuration\n  enabled: true\n  ## `nameOverride` should be used when the same chart is added as a dependency\n  ## multiple times to ensure resource names do not conflict with each other\n  # nameOverride: "app-postgresql"\n  auth:\n    ## Database name\n    database: "appdb"\n    ## Database port number\n    port: 5432\n    ## Secret containing the passwords\n    existingSecret: "secret-postgres-init"\n    ## Password for the root username \'postgres\'. Secret-key \'postgres-password\'\n    password: ""\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);